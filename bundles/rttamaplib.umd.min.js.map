{"version":3,"sources":["ng://rttamaplib/lib/rttamaplib.service.ts","ng://rttamaplib/lib/models/truckdetails.ts","ng://rttamaplib/lib/rttamaplib.component.ts","ng://rttamaplib/lib/rttamaplib.module.ts"],"names":["RttamaplibService","http","this","host","socketURL","prototype","checkUserHasPermission","userName","usersListUrl","post","toPromise","then","res","json","getMapPushPinData","attUID","supervisorId","split","attuId","findTruckNearBy","lat","long","distance","supervisorIds","findTruckURL","llong","radius","getWebPhoneUserData","ldapURL","get","getWebPhoneUserInfo","GetNextRouteData","fromAttitude","toAttitude","routeUrl","GetRouteMapData","dirDetails","newRouteUrl","_this","combinedUrls","forEach","item","sourceLat","sourceLong","destLat","destLong","push","sendEmail","fromEmail","toEmail","fromName","toName","subject","body","smsURL","emailMessage","event","recipientData","header","source","scenarioName","transactionId","notificationOption","moc","emailData","message","address","to","name","cc","bcc","from","bounceTo","replyTo","attribData","value","headers","Headers","Content-Type","options","RequestOptions","JSON","stringify","sendSMS","toNumber","bodyMessage","smsMessage","smsData","details","contactData","requestId","sysId","clientId","phoneNumber","areaCode","number","internationalNumberIndicator","interactiveIndicator","hostedIndicator","provider","shortCode","getTruckFeed","techIds","mgrId","Observable","observer","socket","io.connect","secure","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","emit","attuIds","on","data","next","getRules","dispatchType","getRulesUrl","storeDataInSessionStorage","key","objectToStore","sessionStorage","setItem","storeDataInLocalStorage","localStorage","retrieveDataFromLocalStorage","result","getItem","parse","retrieveDataFromSessionStorage","Injectable","args","providedIn","Http","TruckDetails","TruckDirectionDetails","Ticket","RttamaplibComponent","mapService","vRef","document","querySelector","EventEmitter","loading","cookieATTUID","reportingTechnicians","travalDuration","truckList","ngOnInit","loggedUserId","managerUserId","readyState","onreadystatechange","mapview","loadMapView","checkUserLevel","IsShowTruck","fieldManagers","mgr","id","itemName","IsVP","jQuery","isEmptyObject","level","indexOf","IsAreaManager","managerIds","map","toString","setTimeout","areaMgr","unshift","getListofFieldManagers","catch","error","console","log","TechnicianDetails","length","tech","attuid","getTechDetailsForManagers","reportingTechnicianDetails","email","phone","type","that","truckItems","location","Microsoft","Maps","Location","lastLocation","latitude","longitude","Map","getElementById","credentials","center","mapTypeId","MapTypeId","aerial","road","zoom","liteMode","enableClickableLogo","showLogo","showTermsLink","showMapTypeSelector","showTrafficButton","enableSearchLogo","showCopyright","loadModule","infobox","Infobox","getCenter","visible","setMap","pathLayer","Layer","layers","insert","dataLayer","EntityCollection","Events","addHandler","e","x1","clickedLat","clickedLong","radiousValue","modal","addTicketData","directionsManager","LoadTrucks","maps","lt","lg","rd","isTruckSearch","mtrs","Math","round","getMeters","techData","dirDetails_1","undefined","longg","techID","some","x","techId","dirDetail","wrLat","wrLong","pushNewTruck","foundTruck","routeMapUrls","forkJoin","subscribe","results","j","routedataJson","resourceSets","resources","routeLegs","itineraryItems","nextSourceLat","maneuverPoint","coordinates","nextSourceLong","nextRouteLat","nextRouteLong","currDirDetail","nextLocation","pinLocation","nextCoord","bearing","truckUrl","listOfPins","entities","i","pushpin","Pushpin","techId_1","metadata","ATTUID","truckColor","truckCol","toLowerCase","filter","element","getLocation","CalculateNextCoord","calculateBearing","getTruckUrl","createRotatedImagePushpin","getLength","loc","path","SpatialMath","getRegularPolygon","DistanceUnits","Miles","poly","Polygon","pin","icon","anchor","Point","title","Latitude","Longitude","setView","err","connection","toLocaleLowerCase","Error","curPushPin","color","convertMilesToFeet","miles","truckItem","iconUrl","infoBoxTruckUrl","NewPin","destLoc","jobIdUrl","getIconUrl","mielsTodispatch","parseFloat","dist","toFixed","display","truckId","listOfPushPins","truckStatus","jobType","WRJobType","workType","WRStatus","wrStat","AssingedWRID","wrID","Speed","speed","Distance","CurrentIdleTime","idleTime","ETA","totIdleTime","Email","Mobile","iconInfo","CurrentLat","CurrentLong","WRLat","WRLong","jobId","workAddress","sbcVin","customerName","technicianName","dispatchTime","region","zone","jobIdString","dispatchDate","dt","UTCToTimeZone","find","index","splice","selectedTruck","removeItem","truckIdRanId","random","animationTruckList","loadDirections","isMapLoaded","lastZoomLevel","getZoom","setOptions","$","window","width","showPointer","target","showCloseButton","offset","htmlContent","getInfoBoxHTML","thresholdValue","truckWatchList","TruckId","infoboxOffset","getOffset","infoboxAnchor","getAnchor","infoboxLocation","tryLocationToPixel","PixelReference","control","dx","dy","y","getWidth","centerOffset","technicianDetails","technicianEmail","technicianPhone","viewTruckDetails","mapViewChanged","tValue","reason","originalEvent","className","selectedTruck_1","selectedTruck_2","startLoc","endLoc","Directions","DirectionsManager","setRequestOptions","routeMode","RouteMode","driving","setRenderOptions","drivingPolylineOptions","strokeColor","strokeThickness","waypointPushpinOptions","viapointPushpinOptions","autoUpdateMapView","waypoint1","Waypoint","waypoint2","addWaypoint","routeIndex","route","originalRouteIndex","nextIndex","routePath","MovePinOnDirection","calculateDirections","currentAnimation","Bing","Animations","PathAnimation","coord","idx","frameIdx","rotationAngle","locations","isOdd","setLocation","play","startLocation","endLocation","dlat","dlon","alpha","atan2","PI","sin","cos","num","degToRad","radToDeg","origin","dest","lat1","lon1","lat2","lon2","dLon","SendSMS","form","mobileNo","confirm","controls","reset","SendEmail","emailId","SearchTruck","inputmiles","unsubscribe","getMiles","stringifyJson","parseToJson","Round","precision","factor","pow","tempNumber","getAtan2","destinationLat","destinationLong","locatepushpin","obj","searchPin","url","callback","img","Image","onload","c","createElement","rotationAngleRads","height","context","getContext","translate","rotate","drawImage","isNaN","toDataURL","crossOrigin","src","getThresholdValue","techType","stringifyBodyJson","fieldName","recordDatetime","recordTime","recorddTime","momenttimezone.utc","loggedInUserTimeZone","tz","format","dirManager","UpdateTicketJSONDataList","initIndex","ticketData","ticketImage","ticketSeverity","text","pushpinClicked","attr","getTicketInfoBoxHTML","pinClicked","parms","ticketClick","close","ticketList","TicketInfoList","TicketInfo","ticketInfo","ticket","FieldTupleList","FieldTuple","Name","ticketNumber","Value","entryType","createDate","equipmentID","commonID","parentID","custAffecting","assignedTo","submittedBy","problemSubcategory","problemDetail","problemCategory","plannedRestoralTime","alternateSiteID","locationRanking","assignedDepartment","market","workRequestId","shiftLog","action","equipmentName","shortDescription","parentName","ticketStatus","locationID","opsDistrict","opsZone","ngOnDestroy","Component","selector","template","ViewContainerRef","ViewChild","Input","Output","RttamaplibModule","NgModule","imports","declarations","exports"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Http, Response, RequestOptions, Headers } from '@angular/http';\nimport { Observable, Subscriber } from 'rxjs';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/toPromise';\nimport * as io from 'socket.io-client';\nimport { TruckDirectionDetails } from './models/truckdetails';\nimport { forEach } from '@angular/router/src/utils/collection';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RttamaplibService {\n\n  mapReady = false;\n  showNav = true;\n  host: string = null;\n  socket: any = null;\n  socketURL: string = null;\n\n  constructor(private http: Http) {\n    this.host = \"https://zld04090.vci.att.com:8443/RAPTOR/\";\n    this.socketURL = \"https://zld04090.vci.att.com:3007\";\n  }\n\n  checkUserHasPermission(userName): Promise<any> {\n    var usersListUrl = this.host + \"authuser\";\n    return this.http.post(usersListUrl, userName).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  getMapPushPinData(attUID): Promise<any> {\n    var supervisorId = [];\n    supervisorId = attUID.split(',');\n    var usersListUrl = this.host + 'TechDetailFetch';\n    return this.http.post(usersListUrl, {\n      \"attuId\": \"\",\n      \"supervisorId\": supervisorId\n    }).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  findTruckNearBy(lat, long, distance, supervisorId): Promise<any> {\n    var supervisorIds = [];\n    supervisorIds = supervisorId.split(',');\n    const findTruckURL = this.host + 'FindTruckNearBy';\n    return this.http.post(findTruckURL, {\n      'lat': lat,\n      'llong': long,\n      'radius': distance,\n      'supervisorId': supervisorIds\n    }).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  getWebPhoneUserData(attUID): Promise<any> {\n    var ldapURL = this.socketURL + \"/gettechnicians/\" + attUID;\n    return this.http.get(ldapURL).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  getWebPhoneUserInfo(attUID): Promise<any> {\n    var ldapURL = this.socketURL + \"/gettechnicianinfo/\" + attUID;\n    return this.http.get(ldapURL).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  GetNextRouteData(fromAttitude, toAttitude): Promise<any> {\n    var routeUrl = \"https://dev.virtualearth.net/REST/V1/Routes/Driving?wp.0=\" + fromAttitude + \"&wp.1=\" + toAttitude + \"&routeAttributes=routePath&key=AnxpS-32kYvBzjQ5pbZcnDz17oKBa1Bq2HRwHANoNpHs3Z25NDvqbhcqJZyDoYMj\"\n    return this.http.get(routeUrl).toPromise().then((res: Response) => {\n      return res[\"_body\"];\n    });\n  }\n\n  GetRouteMapData(dirDetails: any[]): any[] {\n    let combinedUrls = [];\n    let routeUrl;\n    var newRouteUrl;\n    dirDetails.forEach((item) => {\n      routeUrl = \"https://dev.virtualearth.net/REST/V1/Routes/?wp.0=\" + item.sourceLat + \",\" + item.sourceLong + \"&wp.1=\" + item.destLat + \",\" + item.destLong + \"&key=AnxpS-32kYvBzjQ5pbZcnDz17oKBa1Bq2HRwHANoNpHs3Z25NDvqbhcqJZyDoYMj\"\n      newRouteUrl = this.http.get(routeUrl)\n      combinedUrls.push(newRouteUrl)\n    });\n    return combinedUrls;\n  }\n\n  sendEmail(fromEmail, toEmail, fromName, toName, subject, body): Promise<any> {\n    var smsURL = this.socketURL + \"/sendemail\";\n    var emailMessage = {\n      \"event\": {\n        \"recipientData\": [{\n          \"header\": { \"source\": \"Kepler\", \"scenarioName\": \"\", \"transactionId\": \"51111\" },\n          \"notificationOption\": [{ \"moc\": \"email\" }],\n          \"emailData\": {\n            \"subject\": \"\" + subject + \"\",\n            \"message\": \"\" + body + \"\",\n            \"address\": {\n              \"to\": [{ \"name\": \"\" + toName + \"\", \"address\": \"\" + toEmail + \"\" }],\n              \"cc\": [],\n              \"bcc\": [],\n              \"from\": { \"name\": \"AT&T Enterprise Notification\", \"address\": \"\" }, \"bounceTo\": { \"address\": \"\" },\n              \"replyTo\": { \"address\": \"\" }\n            }\n          }\n        }],\n        \"attribData\": [{ \"name\": \"subject\", \"value\":  subject },\n        { \"name\": \"message\", \"value\": \"This is first camunda process\" },\n        { \"name\": \"contractorName\", \"value\": \"Ajay Apat\" }]\n      }\n    }\n\n    var headers = new Headers({ 'Content-Type': 'application/json' });\n    var options = new RequestOptions({ headers: headers });\n    return this.http.post(smsURL, JSON.stringify(emailMessage), options).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  sendSMS(toNumber, bodyMessage): Promise<any> {\n    var smsURL = this.socketURL + \"/sendsms\";\n    var smsMessage = {\n      \"event\": {\n        \"recipientData\": [{\n          \"header\": { \"source\": \"Kepler\", \"scenarioName\": \" FirstNetInitialRegistratiionUser\", \"transactionId\": \"0004\" },\n          \"notificationOption\": [{ \"moc\": \"sms\" }],\n          \"smsData\": {\n            \"details\": {\n              \"contactData\": {\n                \"requestId\": \"11116\", \"sysId\": \"CB\", \"clientId\": \"RTTA\",\n                // \"phoneNumber\": { \"areaCode\": \"\" + toNumber.toString().substr(0, 3) + \"\", \"number\": \"\" + toNumber.toString().substr(3, 10) + \"\" }, \"message\": \"\" + bodyMessage + \"\",\n                \"phoneNumber\": { \"areaCode\": \"\", \"number\": \"\" + toNumber + \"\" }, \"message\": \"\" + bodyMessage + \"\",\n                \"scenarioName\": \" FirstNetInitialRegistratiionUser\", \"internationalNumberIndicator\": \"True\", \"interactiveIndicator\": \"False\",\n                \"hostedIndicator\": \"False\", \"provider\": \"BSNL\", \"shortCode\": \"1111\", \"replyTo\": \"DMAAP\"\n              }\n            }\n          }\n        }],\n        \"attribData\": [{ \"name\": \"adminData1\", \"value\": 1234567 }, { \"name\": \"contractorName\", \"value\": \"contractor name\" }]\n      }\n    }\n\n    var headers = new Headers({ 'Content-Type': 'application/json' });\n    var options = new RequestOptions({ headers: headers });\n    return this.http.post(smsURL, JSON.stringify(smsMessage), options).toPromise().then((res: Response) => {\n      return res.json();\n    });\n  }\n\n  getTruckFeed(techIds: any, mgrId: any) {\n    const observable = new Observable(observer => {\n\n      this.socket = io.connect(this.socketURL,\n        {\n          secure: true,\n          reconnection: true,\n          reconnectionDelay: 1000,\n          reconnectionDelayMax: 5000,\n          reconnectionAttempts: 99999\n        });\n\n      this.socket.emit('join', { mgrId: mgrId, attuIds: techIds });\n\n      this.socket.on('message', (data) => {\n        observer.next(data);\n      });\n    });\n    return observable;\n  }\n  //Get Rule designed based on techtype.\n  getRules(dispatchType) {\n    var getRulesUrl = this.host + \"FetchRule\";\n    return this.http.post(getRulesUrl, {\n      \"dispatchType\": dispatchType\n    });\n  }\n\n  storeDataInSessionStorage(key, objectToStore)\n  {\n    // return  if you want to remove the complete storage use the clear() method, like localStorage.clear()\n    // Check if the sessionStorage object exists\n   if(sessionStorage)\n    {\n      sessionStorage.setItem(key, JSON.stringify(objectToStore));\n    }\n  }\n\n  storeDataInLocalStorage(key, objectToStore)\n  {\n      localStorage.setItem(key, JSON.stringify(objectToStore));\n  }\n\n  retrieveDataFromLocalStorage(key, objectToStore)\n  {\n      var result = localStorage.getItem(key);\n      if(result!=null)\n        result = JSON.parse(result);\n      return result;\n  }\n\n  retrieveDataFromSessionStorage(key)\n  {\n    if(sessionStorage)\n    {\n      var result = sessionStorage.getItem(key);\n      if(result!=null)\n        result = JSON.parse(result);\n      return result;\n    }\n    else\n    {\n      return null;\n    }\n  }\n\n}\n","export class TruckDetails {\n   public TruckId: string;\n   public Distance: string;  \n}\n\nexport class TruckDirectionDetails{\n    public techId: string;\n    public sourceLat: string;\n    public sourceLong: string;\n    public destLat: string;\n    public destLong: string;\n    public nextRouteLat: string;\n    public nextRouteLong: string;\n  }\n  \n  export class Ticket{\n    public ticketNumber: string;\n    public entryType: string;\n    public createDate: string;\n    public equipmentID: string;\n    public commonID: string;\n    public parentID: string;\n    public custAffecting: string;\n    public ticketSeverity: string;\n    public assignedTo: string;\n    public submittedBy: string;\n    public problemSubcategory: string;\n    public problemDetail: string;\n    public problemCategory: string;\n    public latitude: string;\n    public longitude: string;\n    public plannedRestoralTime: string;\n    public alternateSiteID: string;\n    public locationRanking: string;\n    public assignedDepartment: string;\n    public region: string;\n    public market: string;\n    public shiftLog: string;\n    public equipmentName: string;\n    public shortDescription: string;\n    public ticketStatus: string;\n    public locationID: string;\n    public opsDistrict: string;\n    public opsZone: string;\n    public parentName: string;\n    public action: string;\n    public workRequestId: string;\n  }","import { ViewContainerRef, Component, ElementRef, OnInit, ViewChild, Input, Output, EventEmitter} from '@angular/core';\n// import { Router } from '@angular/router';\nimport { RttamaplibService } from './rttamaplib.service';\nimport { NguiAutoCompleteModule } from '@ngui/auto-complete/dist';\nimport { Popup } from 'ng2-opd-popup';\nimport { TruckDetails, TruckDirectionDetails, Ticket } from './models/truckdetails';\nimport * as io from 'socket.io-client';\nimport { fail, throws } from 'assert';\n// import { Toast, ToastsManager } from 'ng2-toastr/ng2-toastr';\nimport { OnDestroy } from '@angular/core/src/metadata/lifecycle_hooks';\nimport { TryCatchStmt } from '@angular/compiler/src/output/output_ast';\nimport { AngularMultiSelectModule } from 'angular2-multiselect-dropdown/angular2-multiselect-dropdown';\nimport { setTimeout } from 'timers';\nimport { forkJoin } from 'rxjs';\nimport * as moment from 'moment';\nimport * as momenttimezone from 'moment-timezone';\nimport { ViewEncapsulation } from '@angular/compiler/src/core';\n\ndeclare const Microsoft: any;\ndeclare const Bing;\ndeclare const GeoJson: any;\ndeclare var jQuery: any;\ndeclare var $: any;\n\n// <div id=\"loading\">\n//     <img id=\"loading-image\" src=\"data:image/gif;base64,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\" alt=\"Loading...\" />\n//   </div>\n\n@Component({\n  selector: 'att-rttamaplib',\n  template: `  \n  <div id='myMap' style=\"padding: 0px 0px 0px 10px;\" #mapElement>\n  </div>\n  `,\n  styles: []\n})\nexport class RttamaplibComponent implements OnInit {\n\n  connection;\n  map: any;\n  contextMenu: any;\n  technicianPhone: string;\n  technicianEmail: string;\n  technicianName: string;\n  travalDuration;\n  truckItems = [];\n\n  directionsManager;\n  trafficManager: any;\n\n  truckList = [];\n  truckWatchList: TruckDetails[];\n  busy: any;\n  mapview = 'road';\n  loading = false;\n  @ViewChild('mapElement') someInput: ElementRef;\n  myMap = document.querySelector('#myMap');\n  ready = false;\n  animatedLayer;\n  @ViewChild('smspopup') smspopup: Popup;\n  @ViewChild('emailpopup') emailpopup: Popup;\n  @ViewChild('info') infoTemplate: ElementRef;\n  socket: any = null;\n  socketURL: string;\n  results = [\n  ];\n  public userRole: any;\n  lastZoomLevel = 10;\n  lastLocation: any;\n  reportingTechnicianDetails = [];\n  reportingTechnicians = [];\n  isTrafficEnabled = 0;\n  loggedUserId = '';\n  managerUserId = '';\n  cookieATTUID = '';\n  feet: number = 0.000189394;\n  IsAreaManager = false;\n  IsVP = false;\n  fieldManagers = [];\n  // Weather tile url from Iowa Environmental Mesonet (IEM): http://mesonet.agron.iastate.edu/ogc/\n  urlTemplate = 'http://mesonet.agron.iastate.edu/cache/tile.py/1.0.0/nexrad-n0q-{timestamp}/{zoom}/{x}/{y}.png';\n\n  // The time stamps values for the IEM service for the last 50 minutes broken up into 5 minute increments.\n  timestamps = ['900913-m50m', '900913-m45m', '900913-m40m', '900913-m35m', '900913-m30m', '900913-m25m', '900913-m20m', '900913-m15m', '900913-m10m', '900913-m05m', '900913'];\n\n  techType: any;\n\n  thresholdValue = 0;\n\n  animationTruckList = [];\n\n  dropdownSettings = {};\n  selectedFieldMgr = [];\n  managerIds = '';\n\n  radiousValue = '';\n\n  foundTruck = false;\n\n  loggedInUserTimeZone = 'CST';\n  clickedLat; any;\n  clickedLong: any;\n  dataLayer: any;\n  pathLayer: any;\n  infoBoxLayer: any;\n  infobox: any;\n  isMapLoaded = true;\n  WorkFlowAdmin = false;\n  SystemAdmin = false;\n  RuleAdmin = false;\n  RegularUser = false;\n  Reporting = false;\n  NotificationAdmin = false;\n  @Input() ticketList: any = [];\n  @Input() loggedInUser: string;\n  @Output() ticketClick: EventEmitter<any> = new EventEmitter<any>();\n\n  ticketData: Ticket[] = [];\n\n  constructor(private mapService: RttamaplibService,\n    //private router: Router, \n    //public toastr: ToastsManager, \n    vRef: ViewContainerRef\n    ) {\n    //this.toastr.setRootViewContainerRef(vRef);\n    this.loading = true;\n    this.cookieATTUID = \"kr5226\";//this.utils.getCookieUserId();\n    this.reportingTechnicians = [];\n    this.reportingTechnicians.push(this.cookieATTUID);\n    this.travalDuration = 5000;\n    // // to load already addred watch list\n    if (sessionStorage.getItem('TruckWatchList') != null) {\n      this.truckList = JSON.parse(sessionStorage.getItem('TruckWatchList'));\n    }\n  }\n\n  ngOnInit() {\n    //$('#loading').hide();\n    this.loggedUserId = this.managerUserId = \"kr5226\";//this.utils.getCookieUserId();\n    this.loading = false;\n    //this.checkUserLevel(false);\n    if (document.readyState != 'complete')  {\n      document.onreadystatechange = () => {\n        if (document.readyState === 'complete') {\n          this.mapview = 'road';\n          this.loadMapView('road');\n        } else {\n          this.ngOnInit();\n        }\n      }\n    } else {\n      if (document.readyState === 'complete') {\n        this.mapview = 'road';\n        this.loadMapView('road');\n      }\n    }   \n  }\n\n  checkUserLevel(IsShowTruck) {\n    this.fieldManagers = [];\n    // Assign logged in user\n    var mgr = { id: this.managerUserId, itemName: this.managerUserId };\n    this.fieldManagers.push(mgr);\n\n    // Comment below line when you give for production build 9008\n    this.IsVP = true;\n\n    // Check is logged in user is a field manager area manager/vp\n    this.mapService.getWebPhoneUserInfo(this.managerUserId).then((data: any) => {\n      if (!jQuery.isEmptyObject(data)) {\n        let managers = 'f';\n        let amanagers = 'e';\n        let vp = 'a,b,c,d';\n\n        if (data.level.indexOf(managers) > -1) {\n          // this.IsVP = IsShowTruck;\n          this.IsAreaManager = false;\n          this.managerIds = this.fieldManagers.map(function (item) {\n            return item['id'];\n          }).toString();\n          // this.getTechDetailsForManagers();\n          // this.LoadTrucks(this.map, null, null, null, false);\n          setTimeout(() => { //$('#loading').hide() \n        }, 3000);\n        } else if (data.level.indexOf(amanagers) > -1) {\n          this.fieldManagers = [];\n          var areaMgr = {\n            id: this.managerUserId,\n            itemName: data.name + ' (' + this.managerUserId + ')'\n          };\n          this.fieldManagers.unshift(areaMgr);\n          this.getListofFieldManagers();\n          //$('#loading').hide();\n        } else if (data.level.indexOf(vp) > -1) {\n          this.IsVP = true;\n          this.IsAreaManager = false;\n          //$('#loading').hide();\n        } else {\n          //this.toastr.warning('Not valid Field/Area Manager!', 'Manager', { showCloseButton: true })\n          //$('#loading').hide();\n        }\n      } else {\n        //this.toastr.warning('Please enter valid Field/Area Manager attuid!', 'Manager', { showCloseButton: true })\n        //$('#loading').hide();\n      }\n    }).catch(error => {\n      console.log(error);\n      //this.toastr.error('Error while connecting web phone!', 'Error')\n      //$('#loading').hide();\n    });\n  }\n\n  getListofFieldManagers() {\n    this.mapService.getWebPhoneUserData(this.managerUserId).then((data: any) => {\n      if (data.TechnicianDetails.length > 0) {\n        for (var tech in data.TechnicianDetails) {\n          var mgr = {\n            id: data.TechnicianDetails[tech].attuid,\n            itemName: data.TechnicianDetails[tech].name + ' (' + data.TechnicianDetails[tech].attuid + ')'\n          };\n          this.fieldManagers.push(mgr);\n        }\n\n        this.IsVP = false;\n        this.IsAreaManager = true;\n      } else {\n        this.IsVP = true;\n        this.IsAreaManager = false;\n        //this.toastr.warning('Do not have any direct reports!', 'Manager');\n      }\n    }).catch(error => {\n      console.log(error);\n      //this.toastr.error('Error while connecting web phone!', 'Error');\n      //$('#loading').hide();\n    });\n  }\n\n  getTechDetailsForManagers() {\n    if (this.managerIds != null) {\n      this.mapService.getWebPhoneUserData(this.managerIds).then((data: any) => {\n        if (data.TechnicianDetails.length > 0) {\n          for (var tech in data.TechnicianDetails) {\n            this.reportingTechnicians.push(data.TechnicianDetails[tech].attuid);\n\n            this.reportingTechnicianDetails.push({\n              attuid: data.TechnicianDetails[tech].attuid,\n              name: data.TechnicianDetails[tech].name,\n              email: data.TechnicianDetails[tech].email,\n              phone: data.TechnicianDetails[tech].phone\n            });\n          }\n        }\n      });\n    }\n  }\n    \n  loadMapView(type: String) {\n    var that = this;\n    this.truckItems = [];\n    var location = new Microsoft.Maps.Location(40.0583, -74.4057);\n\n    if (this.lastLocation) {\n      location = new Microsoft.Maps.Location(this.lastLocation.latitude, this.lastLocation.longitude);\n    }\n    this.map = new Microsoft.Maps.Map(document.getElementById('myMap'), {\n      credentials: 'AnxpS-32kYvBzjQ5pbZcnDz17oKBa1Bq2HRwHANoNpHs3Z25NDvqbhcqJZyDoYMj',\n      center: location,\n      mapTypeId: type == 'satellite' ? Microsoft.Maps.MapTypeId.aerial : Microsoft.Maps.MapTypeId.road,\n      zoom: 12,\n      liteMode: true,\n      //navigationBarOrientation: Microsoft.Maps.NavigationBarOrientation.horizontal,\n      enableClickableLogo: false,\n      showLogo: false,\n      showTermsLink: false,\n      showMapTypeSelector: false,\n      showTrafficButton: true,\n      enableSearchLogo: false,\n      showCopyright: false\n    });\n    \n    //Load the Animation Module\n    //Microsoft.Maps.loadModule(\"AnimationModule\");\n    Microsoft.Maps.loadModule('AnimationModule', function () {\n    });\n\n    //Store some metadata with the pushpin\n    this.infobox = new Microsoft.Maps.Infobox(this.map.getCenter(), {\n      visible: false\n    });\n    this.infobox.setMap(this.map);\n\n    // Create a layer for rendering the path.\n    this.pathLayer = new Microsoft.Maps.Layer();\n    this.map.layers.insert(this.pathLayer);\n\n    // Load the Spatial Math module.\n    Microsoft.Maps.loadModule('Microsoft.Maps.SpatialMath', function () { });\n    Microsoft.Maps.loadModule('Microsoft.Maps.Directions', function () { });\n\n    // Create a layer to load pushpins to.\n    this.dataLayer = new Microsoft.Maps.EntityCollection();\n\n    // Add a right click event to the map\n    Microsoft.Maps.Events.addHandler(this.map, 'rightclick', function (e) {\n      const x1 = e.location;\n      that.clickedLat = x1.latitude;\n      that.clickedLong = x1.longitude;\n      that.radiousValue = '';\n      jQuery('#myRadiusModal').modal('show');\n    });\n\n    //load ticket details\n    this.addTicketData(this.map, this.directionsManager);\n    \n  }\n\n  LoadTrucks(maps, lt, lg, rd, isTruckSearch) {\n    const that = this;\n    this.truckItems = [];\n\n    if (!isTruckSearch) {\n\n      this.mapService.getMapPushPinData(this.managerIds).then((data: any) => {\n        if (!jQuery.isEmptyObject(data) && data.techData.length > 0) {\n          var techData = data.techData;\n          var dirDetails = [];\n          techData.forEach((item) => {\n            if (item.long == undefined) {\n              item.long = item.longg;\n            }\n            if (item.techID != undefined) {\n              var dirDetail: TruckDirectionDetails = new TruckDirectionDetails();\n              dirDetail.techId = item.techID;\n              dirDetail.sourceLat = item.lat;\n              dirDetail.sourceLong = item.long;\n              dirDetail.destLat = item.wrLat;\n              dirDetail.destLong = item.wrLong;\n              dirDetails.push(dirDetail);\n              this.pushNewTruck(maps, item);\n            }\n          });\n\n          var routeMapUrls = [];\n          routeMapUrls = this.mapService.GetRouteMapData(dirDetails);\n\n          forkJoin(routeMapUrls).subscribe(results => {\n\n            for (let j = 0; j <= results.length - 1; j++) {\n              let routeData = results[j] as any;\n              let routedataJson = routeData.json();\n              if (routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems != null\n                && routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems.length > 0) {\n                var nextSourceLat = routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems[1].maneuverPoint.coordinates[0]\n                var nextSourceLong = routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems[1].maneuverPoint.coordinates[1]\n                dirDetails[j].nextRouteLat = nextSourceLat;\n                dirDetails[j].nextRouteLong = nextSourceLong;\n              }\n            }\n\n            var listOfPins = maps.entities;\n\n            for (let i = 0; i < listOfPins.getLength(); i++) {\n              var techId = listOfPins.get(i).metadata.ATTUID;\n              var truckColor = listOfPins.get(i).metadata.truckCol.toLowerCase();\n              var curPushPin = listOfPins.get(i);\n              var currDirDetail = [];\n\n              currDirDetail = dirDetails.filter(element => {\n                if (element.techId === techId) {\n                  return element;\n                }\n              });\n\n              var nextLocation;\n\n              if (currDirDetail.length > 0) {\n                nextLocation = new Microsoft.Maps.Location(currDirDetail[0].nextRouteLat, currDirDetail[0].nextRouteLong);\n              }\n\n              if (nextLocation != null && nextLocation != undefined) {\n                var pinLocation = listOfPins.get(i).getLocation();\n                var nextCoord = that.CalculateNextCoord(pinLocation, nextLocation);\n                var bearing = that.calculateBearing(pinLocation, nextCoord);\n                var truckUrl = this.getTruckUrl(truckColor);\n                this.createRotatedImagePushpin(curPushPin, truckUrl, bearing, function () { });\n              }\n            }\n\n            //$('#loading').hide();\n          },\n            (err) => {\n              //$('#loading').hide();\n            }\n          );\n\n          this.connection = this.mapService.getTruckFeed(this.reportingTechnicians, this.managerIds).subscribe(\n            (data: any) => {\n              if (this.reportingTechnicians.some(x => x.toLowerCase() == data.techID.toLowerCase())) {\n                console.log(data);\n                this.pushNewTruck(maps, data);\n              }\n            },\n            (err) => {\n              console.log('Error while fetching trucks from Kafka Consumer. Errors-> ' + err.Error);\n            }\n          );\n\n        } else {\n          //this.toastr.error('No truck found!', 'Manager');\n          //$('#loading').hide();\n        }\n      }).catch(error => {\n        console.log(error);\n        //this.toastr.error('Error while fetching data from API!', 'Error');\n        //$('#loading').hide();\n      });\n    } else {\n\n      const mtrs = Math.round(that.getMeters(rd));\n      this.mapService.findTruckNearBy(lt, lg, mtrs, this.managerIds).then((data: any) => {\n        if (!jQuery.isEmptyObject(data) && data.techData.length > 0) {\n\n          const techData = data.techData;\n          let dirDetails = [];\n          techData.forEach((item) => {\n            if (item.long == undefined) {\n              item.long = item.longg;\n            }\n            if ((item.techID != undefined) && (dirDetails.some(x => x.techId == item.techID) == false)) {\n              var dirDetail: TruckDirectionDetails = new TruckDirectionDetails();\n              dirDetail.techId = item.techID;\n              dirDetail.sourceLat = item.lat;\n              dirDetail.sourceLong = item.long;\n              dirDetail.destLat = item.wrLat;\n              dirDetail.destLong = item.wrLong;\n              dirDetails.push(dirDetail);\n              this.pushNewTruck(maps, item);\n              that.foundTruck = true;\n            }\n          });\n\n          var routeMapUrls = [];\n          routeMapUrls = this.mapService.GetRouteMapData(dirDetails);\n\n          forkJoin(routeMapUrls).subscribe(results => {\n\n            for (let j = 0; j <= results.length - 1; j++) {\n              let routeData = results[j] as any;\n              let routedataJson = routeData.json();\n              if (routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems != null\n                && routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems.length > 0) {\n                var nextSourceLat = routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems[1].maneuverPoint.coordinates[0]\n                var nextSourceLong = routedataJson.resourceSets[0].resources[0].routeLegs[0].itineraryItems[1].maneuverPoint.coordinates[1]\n                dirDetails[j].nextRouteLat = nextSourceLat;\n                dirDetails[j].nextRouteLong = nextSourceLong;\n              }\n            }\n\n            var listOfPins = that.map.entities;\n\n            for (let i = 0; i < listOfPins.getLength(); i++) {\n              const pushpin = listOfPins.get(i);\n              if (pushpin instanceof Microsoft.Maps.Pushpin) {\n\n                const techId = pushpin.metadata.ATTUID;\n                const truckColor = pushpin.metadata.truckCol.toLowerCase();\n                var currDirDetail = [];\n\n                currDirDetail = dirDetails.filter(element => {\n                  if (element.techId === techId) {\n                    return element;\n                  }\n                });\n\n                var nextLocation;\n\n                if (currDirDetail.length > 0) {\n                  nextLocation = new Microsoft.Maps.Location(currDirDetail[0].nextRouteLat, currDirDetail[0].nextRouteLong);\n                }\n\n                if (nextLocation != null && nextLocation != undefined) {\n                  var pinLocation = listOfPins.get(i).getLocation();\n                  var nextCoord = that.CalculateNextCoord(pinLocation, nextLocation);\n                  var bearing = that.calculateBearing(pinLocation, nextCoord);\n                  var truckUrl = this.getTruckUrl(truckColor);\n                  this.createRotatedImagePushpin(pushpin, truckUrl, bearing, function () { });\n                }\n              }\n            }\n\n            // Load the spatial math module\n            Microsoft.Maps.loadModule('Microsoft.Maps.SpatialMath', function () {\n              // Request the user's location\n\n              const loc = new Microsoft.Maps.Location(that.clickedLat, that.clickedLong);\n              // Create an accuracy circle\n              const path = Microsoft.Maps.SpatialMath.getRegularPolygon(loc,\n                rd,\n                36,\n                Microsoft.Maps.SpatialMath.DistanceUnits.Miles);\n\n              const poly = new Microsoft.Maps.Polygon(path);\n              that.map.entities.push(poly);\n              // Add a pushpin at the user's location.\n              const pin = new Microsoft.Maps.Pushpin(loc,\n                {\n                  icon: 'https://bingmapsisdk.blob.core.windows.net/isdksamples/defaultPushpin.png',\n                  anchor: new Microsoft.Maps.Point(12, 39),\n                  title: rd + ' mile(s) of radius',\n                });\n\n              var metadata = {\n                Latitude: lt,\n                Longitude: lg,\n                radius: rd\n              };\n\n              Microsoft.Maps.Events.addHandler(pin, 'click', (e) => {\n                that.radiousValue = rd;\n                that.clickedLat = lt;\n                that.clickedLong = lg;\n                jQuery('#myRadiusModal').modal('show');\n              });\n\n              pin.metadata = metadata;\n              that.map.entities.push(pin);\n              that.dataLayer.push(pin);\n\n              // Center the map on the user's location.\n              that.map.setView({ center: loc, zoom: 8 });\n            });\n\n            //$('#loading').hide();\n          },\n            (err) => {\n              console.log(err);\n              //$('#loading').hide();\n            }\n          );\n\n          let feedManager = [];\n\n          this.connection = this.mapService.getTruckFeed(this.reportingTechnicians, this.managerIds).subscribe(\n            (data: any) => {\n              if (dirDetails.some(x => x.techId.toLocaleLowerCase() == data.techID.toLocaleLowerCase())) {\n                console.log(data);\n                this.pushNewTruck(maps, data);\n              }\n            },\n            (err) => {\n              console.log('Error while fetching trucks from Kafka Consumer. Errors-> ' + err.Error);\n            }\n          );\n\n        } else {\n          //this.toastr.error('No truck found!', 'Manager');\n          //$('#loading').hide();\n        }\n      }).catch(error => {\n        console.log(error);\n        //this.toastr.error('Error while fetching data from API!', 'Error');\n        //$('#loading').hide();\n      });\n    }\n\n  }\n\n  getTruckUrl(color) {\n    let truckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHkmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTItMTlUMTU6NDk6MDEtMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTctMTItMTlUMTU6NDk6MDEtMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YWRmM2ViMWQtNGJlZC1jNjQ0LTgzYmUtYjQ5YjZlNDlmYmRmIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZGExNTBlYTEtMjJhYy03OTQ5LThiNmEtZWU1MTc4ZTBmMWFkIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2Ij4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmYwZWQxZWM3LTM1OTAtZGE0Yi05MWIwLTYwOTQ2ZjFhNWQ5YzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2IiBzdEV2dDp3aGVuPSIyMDE3LTEyLTE0VDE5OjA4OjAzLTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZDQ2MDc1Zi04MmRmLWY3NDAtYmU3ZS1mN2I0MzlmYjcyMzEiIHN0RXZ0OndoZW49IjIwMTctMTItMTVUMTk6MjM6MzEtMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFkZjNlYjFkLTRiZWQtYzY0NC04M2JlLWI0OWI2ZTQ5ZmJkZiIgc3RFdnQ6d2hlbj0iMjAxNy0xMi0xOVQxNTo0OTowMS0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4db7vjAAACe0lEQVRIx92WTWtTQRSGnzNzb3LTtKG1WlHwq4uCbYX+A125ELcuuihCRXCp2H3BhSv/gUvBglJw4ULBigpSaUFciFLFjSAtsX61SdM0vXNc9NokRZOYARXnMqu5zDPnnPe8M4Gq8qdHwF8Y/x706rOJnpTItadf7o++Ly+VrZhkRZL5YzjExOn1F5mpsUPnbkyMTT5qGzpXmRlZLubHP7KE7Upn2K6/1DFVwWShmFsdf/h2ZnyCSWk/vfe6e74NvSazJ0fsKvVrdfoTzKawXioyN/+85FfTJ7un3KccwdkiFBsdXolTIHmDzHb51bTncA4XOGIRNFSkQXdZo6g1ZLoj6wWNBmQ07NVp8inshiANgtXVMmFXyIGh/ae8oA+C2/nAWAp3hOBD9Mu/NQa6HdnjZYbP9J8GZtqGHhzc21FIrRHs2yAoxw1PL1lFg00G0kcuApfahi6/LNzq7Ovl5PmjlItraCJZQRCt5lpFyURp5m8uMP15qnT5xJX201uubKSzbqs7JHY1YSnUQBFFjQEMX9dWPG1QQlUUR4yqrfqB1repKDhinChI6AfVRK6SfPV28HOvsBg/qBNFhGSbxlegk6QMzveWUWoMQZrvJmyLrW2oQZAYzG/c895QEWkpwC0xmeTCc57pRVtlYtQgCtYXKiK0/oRyiFHEeAopdq7G5LVpNavTJ1LVmppKM+HiWtN4Y2haLIomKdYmQkr62heqAsYK1ghhFO4AS13aAwtiDWx6Qou2ZDKlHItvVqlU1lHVqiFqnSMQhSGuZNCO5lJqCB3cdWxl4d2rztnrixhrcAl0ZzpUhVgdUdTJcP9IwQt698Ljvv/mhf8dtGHlh4v5R1IAAAAASUVORK5CYII=';\n\n    if (color.toLowerCase() == 'green') {\n      truckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHkmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTItMTlUMTU6NDk6MDEtMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTctMTItMTlUMTU6NDk6MDEtMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YWRmM2ViMWQtNGJlZC1jNjQ0LTgzYmUtYjQ5YjZlNDlmYmRmIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZGExNTBlYTEtMjJhYy03OTQ5LThiNmEtZWU1MTc4ZTBmMWFkIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2Ij4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmYwZWQxZWM3LTM1OTAtZGE0Yi05MWIwLTYwOTQ2ZjFhNWQ5YzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2PC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2IiBzdEV2dDp3aGVuPSIyMDE3LTEyLTE0VDE5OjA4OjAzLTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ZDQ2MDc1Zi04MmRmLWY3NDAtYmU3ZS1mN2I0MzlmYjcyMzEiIHN0RXZ0OndoZW49IjIwMTctMTItMTVUMTk6MjM6MzEtMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFkZjNlYjFkLTRiZWQtYzY0NC04M2JlLWI0OWI2ZTQ5ZmJkZiIgc3RFdnQ6d2hlbj0iMjAxNy0xMi0xOVQxNTo0OTowMS0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4db7vjAAACe0lEQVRIx92WTWtTQRSGnzNzb3LTtKG1WlHwq4uCbYX+A125ELcuuihCRXCp2H3BhSv/gUvBglJw4ULBigpSaUFciFLFjSAtsX61SdM0vXNc9NokRZOYARXnMqu5zDPnnPe8M4Gq8qdHwF8Y/x706rOJnpTItadf7o++Ly+VrZhkRZL5YzjExOn1F5mpsUPnbkyMTT5qGzpXmRlZLubHP7KE7Upn2K6/1DFVwWShmFsdf/h2ZnyCSWk/vfe6e74NvSazJ0fsKvVrdfoTzKawXioyN/+85FfTJ7un3KccwdkiFBsdXolTIHmDzHb51bTncA4XOGIRNFSkQXdZo6g1ZLoj6wWNBmQ07NVp8inshiANgtXVMmFXyIGh/ae8oA+C2/nAWAp3hOBD9Mu/NQa6HdnjZYbP9J8GZtqGHhzc21FIrRHs2yAoxw1PL1lFg00G0kcuApfahi6/LNzq7Ovl5PmjlItraCJZQRCt5lpFyURp5m8uMP15qnT5xJX201uubKSzbqs7JHY1YSnUQBFFjQEMX9dWPG1QQlUUR4yqrfqB1repKDhinChI6AfVRK6SfPV28HOvsBg/qBNFhGSbxlegk6QMzveWUWoMQZrvJmyLrW2oQZAYzG/c895QEWkpwC0xmeTCc57pRVtlYtQgCtYXKiK0/oRyiFHEeAopdq7G5LVpNavTJ1LVmppKM+HiWtN4Y2haLIomKdYmQkr62heqAsYK1ghhFO4AS13aAwtiDWx6Qou2ZDKlHItvVqlU1lHVqiFqnSMQhSGuZNCO5lJqCB3cdWxl4d2rztnrixhrcAl0ZzpUhVgdUdTJcP9IwQt698Ljvv/mhf8dtGHlh4v5R1IAAAAASUVORK5CYII=';\n    } else if (color.toLowerCase() == 'red') {\n      truckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAH3mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTItMTlUMTU6NTI6MjEtMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTctMTItMTlUMTU6NTI6MjEtMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDVjMzc1ZDYtMWNlOC1kZjRlLTgwYjgtMjlmYTRhZjA2ZDE3IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZGRmMGIzYmEtMWNiZC1hMjQ0LWEyZWMtMTg4YTlkOGRlMjk0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2Ij4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjAwMDJlNDhlLThmOWUtNjU0Yy05YjQ2LTVmYWZkMTBhN2E2NzwvcmRmOmxpPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmMGVkMWVjNy0zNTkwLWRhNGItOTFiMC02MDk0NmYxYTVkOWM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjg4ZDM1NmE3LTcxODEtZTU0YS05OWZlLTQ4MGUzNWFjNjZmNjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjg4ZDM1NmE3LTcxODEtZTU0YS05OWZlLTQ4MGUzNWFjNjZmNiIgc3RFdnQ6d2hlbj0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWQ0NjA3NWYtODJkZi1mNzQwLWJlN2UtZjdiNDM5ZmI3MjMxIiBzdEV2dDp3aGVuPSIyMDE3LTEyLTE1VDE5OjIzOjMxLTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowNWMzNzVkNi0xY2U4LWRmNGUtODBiOC0yOWZhNGFmMDZkMTciIHN0RXZ0OndoZW49IjIwMTctMTItMTlUMTU6NTI6MjEtMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7SdAwAAAAspJREFUSMfll7trFFEYxX/fnZldNwmJGkKICD4iIWKlIoqrVj46QVBsfYD4H2hhbZAU2oiInVqIWGhlI6ggBlF8BN8hKohEohI1bjb7uPez2NHdTdzZZSdo4QzfbeYO557vnHvujKgqf/sy/IPLj3r49M49hsduJVoGL67oHCdhA+NmzhGUbCEnD7cun9jTufrD2LJeu+XwweZBb548sXjDZO70slxyXb7DpUQoa6FlWOc8Wf9oYnSs9+0F+laeA6aaBv10e2jNF5vdua5/JdbOIFlhBTWK1fza9ufDiwrbdnwBLjat6RvD4I+WdnCGgtPq0nLZIkCCJ0rPlYcPzscy0t1PH/u++Ubr2k0sSTyeGcPA1cu5WKCZru4z87HToMxTalZSBaRId6Dj29KbjsZy777+vlP25YtDNwIfDYIqIaXCSEYMMM2SnLG73o1fiwW6u6d77/wH94vXXw57WZEKIJAKP3nOp8PlSU9871p15mwiFujzkdH9/R2dyS2ZH3gJnz+llwAOh/opJluUzyOvDnRBZIslKgaPtbXmt2cLwdLNaezCBeDcrC1TYmwhmUJej3DpyWOOqErTTCWTLbZ6yaDNGJxUCVnFVMVg8FDxSEA2VnsxBsVgw6JGV4x1qHGIk/jZ6wAnJYKi1SlUFU4CiICU3onHFFBVSnfZsbNBFRVFaOyYjAwHT8FZC1obMNypgGCda+is9OuvSFA0HDVKiHDeXLT3N5BENNgAjZmoIVAJh1+61WJa8tIcuNcTrURFNIKpCIjMjaYFVSwOE8HUd4pTxTb4kVe3vQgIIcuodFNpWNXoGJQwD4wBz9RMB6cOMVJaXFzQhAqtnuBlM5hJH7UWCds+y9MJhykWCBowUyRozlnvvbOMDg1VgZhwZ8oM7gHwGbxYoOmB419NMd+GyxUU57QiCipPuFIJBt9sDFJTdW3y3/xW/ARNpjvxl80uLAAAAABJRU5ErkJggg==';\n    } else if (color.toLowerCase() == 'yellow') {\n      truckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAIKmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTctMTItMTlUMTU6NTg6NTUtMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTctMTItMTlUMTU6NTg6NTUtMDg6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YWQ4MjFkZjMtZmFlNC0xMjQzLTljZTUtZmFkN2E2MTdmNTU3IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZjUwN2IxYmMtNDBkZS0wZDQyLWIwZTctMGU4NjNmNzVkNjA0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2Ij4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjAwMDJlNDhlLThmOWUtNjU0Yy05YjQ2LTVmYWZkMTBhN2E2NzwvcmRmOmxpPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDo4MzcxY2U2YS0xYWZkLTE0NDMtOTgxZC1kN2E4NGY1NmU0ZWU8L3JkZjpsaT4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6ZjBlZDFlYzctMzU5MC1kYTRiLTkxYjAtNjA5NDZmMWE1ZDljPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo4OGQzNTZhNy03MTgxLWU1NGEtOTlmZS00ODBlMzVhYzY2ZjY8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OGQzNTZhNy03MTgxLWU1NGEtOTlmZS00ODBlMzVhYzY2ZjYiIHN0RXZ0OndoZW49IjIwMTctMTItMTRUMTk6MDg6MDMtMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjVkNDYwNzVmLTgyZGYtZjc0MC1iZTdlLWY3YjQzOWZiNzIzMSIgc3RFdnQ6d2hlbj0iMjAxNy0xMi0xNVQxOToyMzozMS0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWQ4MjFkZjMtZmFlNC0xMjQzLTljZTUtZmFkN2E2MTdmNTU3IiBzdEV2dDp3aGVuPSIyMDE3LTEyLTE5VDE1OjU4OjU1LTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnewY6UAAAJESURBVEjH3VYxaxRREP6+9/ayudUIkSNnCAoRlYiIWgmChRDsRUtbC3+AlsHWwlYbi1hpYxEEm1ipMRBREUQ8go2SHCki3l243N7uzVgkJnfHubu5FxJw4LHFzs43833zZoeqir02g32wfQH1kl5WVn+Vv3y4Fxw78kwODR2EyIYU2iP19VDwc+WiGT91v14cHR9NisskTacfXGtcnXzrF0Z+IwzZ9lU3tCDIe5h91cSaXApv3Jwb7JveT58/ytJyDaoWbD9iQfG2DtSDUhDFFqVvJXHSdHpGML9A+EFyEAVhSUTxAB4/ybtp2lBBswXAEtZqO7ddmStoFbRALQrdQGdnHqJVvY1qtQLGBv9Sn1DUQoVqA1N3b6WCMm04vH6R17mFYQgDWLtNaEelamANcO5MGZPX1+gE+vTRUW22hlA4/ANxRND2vDCgKOwAMHFC8fzl2PqdqcWgb3pPn6xhtT6OkWIRKgrVnpKCCng+8WZ+BWOFipumUWwQRzHOnj8OSMqMzg+gvNRC4cCyG+gWk+sR4pYkuuUIxFGMMDSOoGx7MsWPuzR7t6tNiao9Eu0XVDvmrKYzortUqTJjpZudra6gZHfUhEL1b4Ku9HLnncIMbon9bVRBEDvZo9QVFJqtPt0cSwRhMiTopXFFApqle9ljoeive6VNo/TuJbOJmghqQfi+B2TUdANPHK+MWv2+2OTlKx6MmERGMJiD73uwoHECHS76K8V6IXj/LhIVdvzKui3nA6WvDXNhwtadN4f/ZsP/Awzt5R3bsQ2jAAAAAElFTkSuQmCC';\n    } else if (color.toLowerCase() == 'purple') {\n      truckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAH3mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDMtMDJUMTI6MjA6MzMtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDMtMDJUMTI6MjA6MzMtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YjVmYmU3YjYtZGQ1OC1jNzRiLThmZGYtYjJkNjU1NTY3OTE0IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZjAxNmZmNjctYWYxZC02MTQ5LTgzMjQtZDM0OGY1Nzg0ZTk0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ODhkMzU2YTctNzE4MS1lNTRhLTk5ZmUtNDgwZTM1YWM2NmY2Ij4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjAwMDJlNDhlLThmOWUtNjU0Yy05YjQ2LTVmYWZkMTBhN2E2NzwvcmRmOmxpPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDpmMGVkMWVjNy0zNTkwLWRhNGItOTFiMC02MDk0NmYxYTVkOWM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjg4ZDM1NmE3LTcxODEtZTU0YS05OWZlLTQ4MGUzNWFjNjZmNjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjg4ZDM1NmE3LTcxODEtZTU0YS05OWZlLTQ4MGUzNWFjNjZmNiIgc3RFdnQ6d2hlbj0iMjAxNy0xMi0xNFQxOTowODowMy0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NWQ0NjA3NWYtODJkZi1mNzQwLWJlN2UtZjdiNDM5ZmI3MjMxIiBzdEV2dDp3aGVuPSIyMDE3LTEyLTE1VDE5OjIzOjMxLTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiNWZiZTdiNi1kZDU4LWM3NGItOGZkZi1iMmQ2NTU1Njc5MTQiIHN0RXZ0OndoZW49IjIwMTgtMDMtMDJUMTI6MjA6MzMtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+3413jwAAAupJREFUSMfll89vVFUUxz/n3vum04LlV8Dwa1GRNoS4wKYQ40pwRQg7owlucCEbNqzwD2CHCzfKQleWxBBWJpC4QzYEQ8LCKKLSAFWUSJBSy0w7795zXLwpnaYz0zqv0YVncieZnJv3vef7/Z5z34iZ8W+H4z+I0C15cfwSD29eqeQXXnm5Nr2pIlnSpacWGrEuz/ZeeTK669iDqaHf0okz7/QOeuOzmzuGpt78eGsaGtO1jX4n8lwLa8IroEGlOjk6MZM9GGfYPgVqPYNOXn/66vrG06N7dm4g17QoZy3CZALENBpvrd8mb8w8Bs73rOmjyv2zs/01oglR46KVbGHVU6IRYCJ8v/Xqj199XspI3818M1wP09bCatuoAI4+7lduc/7rT+ZKgcaN9XMv6LpZATKrdlyePjKBF9PmP17b9/oHpdx7eMdbH6Vb6f1vB66iYkhLTqz4ZYAiVKOwqbYz7f356JelQA8OHnk7j2viDz9d81HmWAy7ELl3DOaDbGf35iOnD1ZKgd75ZeL4ljDS91Ico2J9GNpml4AqiPCXTTM5efc9GO1KsXQbg+/KqcYIY9nI8AiyIS+4nG+ZJr2C4BWs38jvBC4//IJx+1B6rnSWuZgxkPXLGpxFRKVNnYKJoSqIeQJZvRS9gkMxoiScJKTD+U0dmiCZKz97FS10NCno7KCEiIEAomhb3Xu6ZQyjs/bODHEGrOyaXAZUiOSYFdp1ZMQVuaQJt4I6XPekw5p1drOj1+JIxbiU1aDXWr7bR3LGP3n/CMttEAQR8ALWYfA7BWvuKw2aEfBNMpItzNsllQoFoHTXfoV9WhgJtGulogG1hJquDr2+sAjJrGOlUIzfVdHUNakSZ7gAFjt5LeG9zDugLGhGlQGk7pEgkOYf61r8LIgJWoGsYQSycqANZv0jfuX3e3efTyRpfto1iScwzZ++FOihkwemfMOvDXPkTk3ngVR0SS+rGCmIG67ury3bhv+bvxV/A8sVQAg8+gDYAAAAAElFTkSuQmCC';\n    }\n\n    return truckUrl;\n  }\n\n  convertMilesToFeet(miles) {\n    return Math.round(miles * 5280);\n  }\n\n  pushNewTruck(maps, truckItem) {\n    const that = this;\n    var currentObject = this;\n    var pinLocation = new Microsoft.Maps.Location(truckItem.lat, truckItem.long);\n    var destLoc = new Microsoft.Maps.Location(truckItem.wrLat, truckItem.wrLong);\n    var iconUrl;\n    var infoBoxTruckUrl;\n    var NewPin;\n    var jobIdUrl = '';\n\n    var truckColor = truckItem.truckCol.toLowerCase();\n    iconUrl = this.getIconUrl(truckColor, truckItem.lat, truckItem.long, truckItem.wrLat, truckItem.wrLong);\n\n    if (truckColor == 'green') {\n      infoBoxTruckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAArCAYAAADbjc6zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNS0wMVQxNjoxMToxMC0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDUtMDFUMTY6MjAtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDUtMDFUMTY6MjAtMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTdkZjE0YmQtNDBhOC01NDRjLTkzOTAtM2RiNmZkYTZmMmJlIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MGFkM2IyZDItODBhNi0xMDRkLThiNzQtZjVhZDFmMThlYzEyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OTdkZjE0YmQtNDBhOC01NDRjLTkzOTAtM2RiNmZkYTZmMmJlIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5N2RmMTRiZC00MGE4LTU0NGMtOTM5MC0zZGI2ZmRhNmYyYmUiIHN0RXZ0OndoZW49IjIwMTgtMDUtMDFUMTY6MTE6MTAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+OduK3QAAAw9JREFUaN7tmj1PG0EQhu8nuKehDJ0rlNJSJGpHpCWylDYF6aABV6QiQQKlSRRMFSUFpqNBmAoEBaQgpDTiQ5QGmpSbe9FtNBn2znt3O8d9eKSRbTjtvvfc7szc7nqekCml2qrYduJ7TQpOQ/dy/+defTnYUMu9tdw7dEIvsa4UoC3dw9Snl2ps4VlhHHqpJQVQ9/2j7z3fB2Fj9NfN70LB0X7QP0oGKADTs53E6KgygPxrFzkAzFc0Rh2jpnKA/OvW+ch48+2tsfFX66+rBYjDWdx+H9l4pQBxOO+680MbrwygJHAqAygpnEoASgOn9IDSwik1IP/7Slo4pQXkfzZdwCkzoL4LOKUEREfPj5Nu6sbLCKijfzz/8GIEyAAIK2fqcnDtpPEyAnJ6MyNAQxzTlJqLaZulTyxNqjuy7OpJPG26JnQxuFKzm3Nq+utM7h06ofe/JVcJQHSaFdxmPal4gXqK7RAUzbZ0kSgWUDGfscCG+oovzebRmbXFARXNR4CyBITpoyM/PvO0QYjSgmqzLTWcAEJn3483jVENKXJ5d/XJwGCn5ZSUGNT2+4cP2VUUEDLTnUVmgkiMsCzhhD00bp/3N2QA4enwbWVkKDwVON/4zxISh4N70dqgG1mUasP1TgHx8jtsbwzX0SraxfKJzai2WexDaKDaTNPtUZFoCwhHQ2w3DgEJKwNZvYvRV4M42k7ZwQpD9d/QgPaG3YwWYbskQqfjMNGujqrYaqMjjt4vQgSzcQ2opf+yfbbzKG7gtzY0EremkKyv6Mi21UbvR58v4GeCMGj4ds9P/R/EGkR6pGs4DYAQZCtexyyd+iUcqTuJNpr6Q7JfnQOqUUhhlmQEZWVJAIVYK2y7uRYcvLyNqm/yutxhq42XK/Tt/V9gtjyESb0TZ1uIDv0gCTQEvR2VurmzSvs8aKOW9lDmOI1RUUIMc7ruCVtwow/aot4JDdpaYuee0RleBJEVIMq0XOlUQLS2ZgJtHQkhKzHCQtvL0Gi5YmEd6ad1HtH5nnWwc6+tTgtfg0F3M06bfwG4Tv8Xy+hPaAAAAABJRU5ErkJggg==';\n    } else if (truckColor == 'red') {\n      infoBoxTruckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAArCAYAAADbjc6zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNS0wMVQxNjoxMToyMS0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDUtMDFUMTY6MTU6MjMtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDUtMDFUMTY6MTU6MjMtMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZjA1Y2VmNDctM2NjYi03YjQ2LWI1ZjQtN2I5MDAwMjg1MjllIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOmYwNWNlZjQ3LTNjY2ItN2I0Ni1iNWY0LTdiOTAwMDI4NTI5ZSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmYwNWNlZjQ3LTNjY2ItN2I0Ni1iNWY0LTdiOTAwMDI4NTI5ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZjA1Y2VmNDctM2NjYi03YjQ2LWI1ZjQtN2I5MDAwMjg1MjllIiBzdEV2dDp3aGVuPSIyMDE4LTA1LTAxVDE2OjExOjIxLTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpKpcKcAAAL4SURBVGje7ZrNSjMxFIbnEuYSunbVnVs37sUbcG5A6NZunKU7Xeja6g20F1Cw624UQSwI/kBFEIpFQRCEmLc0cnqcTDMzyTg/PXA+9WNI3jxJTk5+PM+BCSFCUW67lO57juBsqFq+39/F6/m5eDk5KbxDJ/QS67oC1FM1jLa3xeXaWmkcepk10gBoSj+UfiH9TTdGP0ejUsFR/jEc0maEScFcmE5iVFQbQPLDfQ4A8xWFUceoqR0g+dEpHxn3u7uRhd8FQb0AcTjjg4PYwmsFiMN5areXFl4bQGng1AZQWji1AJQFTuUBZYVTaUDyl6OscCoLSP6zZQNOlQE92IBTZUAzm/R6mQuvNKCbzc0VIB2gr+dnK4VXFpCtxqwALXFMU2o2pm2efr2+zo9dW57t3qZnQl/jsXja2xN3OzuFd+iEXma+dUB0mpXcWiqLth4vkE+xoVo269E9mJOAivmMAzbkV/xotojOLHQOqGy+ApQnIEwfFfnxs0gXhEgtqDbTVMMKIFQ26XYjoxqWyJfj438Dg5uWz9tb7R0dVlengExXJojECMsTjq7TuL2enbkBhN7h18pYodArcH7xnyckDgdtUdqgG6so1YbvrQLi6bfubgzf0SzaxvGJyag2OexDaKDaoqZbZJJoAghPQ0wvDgEJJwN57cXo1iCJNozwJdn/xgKguMYoEaZHInQ6LhNt66mKqTY64mh7ESK0z17U/0z7/T9xA3//BjhZSNKcwmV+RUe2qTbaHvW+IOJN0IDfhV0tvAiTkR7LNZwGQAgyFa9illr6XTjdHiTRRjtPs/o1OSCfQtIukSlGUF6WBpDGAt1dvD9/eDmNy2+Ketxhqo2nK3T3vhCYDR5hUu8kuRZiO+NBRHk2PYxbuv8c5i1m2o/zMvysjzIbNEbFCYmY003Psc0bOtMWtyeM0BY4e/eMyrARxKoAUZrjysDLwfjNsKG2jgshRwnCQujlaOiMBNo6rnvrMabygXGws6+tOa9fZ9C9lbTcHxHBxB7J6eTVAAAAAElFTkSuQmCC';\n    } else if (truckColor == 'yellow') {\n      infoBoxTruckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAsCAYAAADGiP4LAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNS0wMVQxNjoxMTowNi0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDUtMDFUMTY6MTU6MTktMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDUtMDFUMTY6MTU6MTktMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTAyNDE4Y2EtNTMzNC04NjRjLWFhNmEtYTJlNDk2YmU1YmE4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjkwMjQxOGNhLTUzMzQtODY0Yy1hYTZhLWEyZTQ5NmJlNWJhOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjkwMjQxOGNhLTUzMzQtODY0Yy1hYTZhLWEyZTQ5NmJlNWJhOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTAyNDE4Y2EtNTMzNC04NjRjLWFhNmEtYTJlNDk2YmU1YmE4IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTAxVDE2OjExOjA2LTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnKbI5YAAAMJSURBVGje7Zq9SsRAEIDvESx8AMEXOHwB7wnUJ5B7AAV7C6/VRkutvM5SQQQbOQW1sfBALSz84RobwbPQQsytM2s2TjabZPOza35uYFBQspMvszOzs9NoWBDG2ATobAm02bApsOAC6BMrl7yBruFHNQ2nw8ot18YgwYNb3jJf78x53GHO/UbxFexEe4nsmwJ0IFZwzlrs+3CyNIr2UkkLoAm6Cdpz96xSRu+3pYIjdPR6kQ6QC6anu4lxodoAciO7X2C/4sN8Cl5TO0Dwf7uyZzhXi+o9fDlfL0ABOHer0UGuToACcPrL8VmgLoDSwKkNoLRwagEoC5zKA8oKp9KA4PetrHAqC8htS2SGU2VAT3nAqSQg6j2jwV7203AFAXW91sTJzBiQAtA1/+1zkE8/pYKAcn2ZMaA4QLBNqeSxba3q8TRjX0NzgPgXID0h9jFgTn8JPGuu+Ap2or2+lqsJQHSblVxWGqbiBdZT0g1B2eRAFInmAirsZ2ywYX0VaM0WUCXpmAdUMh0DsgoIto+I/PxngS4IsbTw2aZZauQCCBfDmKIUSJGj+/X/A3O1CCXGTcgd3TnPrkYB/WamYfyFIRiJHma1+g37aJI4D9tmAOHXka+VMUPhV+EqXfzbhCTD4VlJ2IZehX+ntoV0LdIDksrv0LsxTOv0ZjWH9omWV2s0+3hoILaptlugSNQFhKMhuheHHObnwNpZjB4NktjGPTy6+m8JQKdxL+MZodkSodsx1ui8RlU0baMeR9+Xhwi/TAlAbe9lXo6CcQOpiwfCQ5LWFCbrK+rZ2rbR93HnC+SZIHQa+bqn/zexMeSRHtM1VxIA0SBtQCJmuanfiELqTmUbSf0h2a+pmkLtx6bIFB5kS9IACpF21KguDl4OI+ubgrY7tG2TyhV6evcCs+YQJtVukmsh6vpuEmgZ1E5U6g4283yV9rP7jImsQ5lTvhgVYYhiTzctzGM/e7ZFnAkVtrWNzT3jYngQ5IdWMErVrszVgPiB9aS2dU0YspUgLHQsT/W3E9imDecHRjxSmK+bqfwAAAAASUVORK5CYII=';\n    } else if (truckColor == 'purple') {\n      infoBoxTruckUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAArCAYAAADbjc6zAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGtmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0wM1QxMTozMTowNC0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDUtMDFUMTY6MTU6NDktMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDUtMDFUMTY6MTU6NDktMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDkwYTAwZTYtOTNmZi1kYjQ1LWIxMjEtM2I1MzBmN2YyZTQwIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NTJkMWQwMDgtYWMxMy03MDQ5LTlmOGMtOThiNTcxZDIzYjI0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YzI0OTg0MGUtMmJkMS1kZDQxLTg0Y2ItMWQ0YjRjNzVkMDkxIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjMjQ5ODQwZS0yYmQxLWRkNDEtODRjYi0xZDRiNGM3NWQwOTEiIHN0RXZ0OndoZW49IjIwMTgtMDMtMDNUMTE6MzE6MDQtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMzk3MjE4LTlmMDUtZTc0MC1iY2Y5LTNiMmVjMzk5MDQ3MiIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0wM1QxMTozOTowOC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDkwYTAwZTYtOTNmZi1kYjQ1LWIxMjEtM2I1MzBmN2YyZTQwIiBzdEV2dDp3aGVuPSIyMDE4LTA1LTAxVDE2OjE1OjQ5LTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgYoI4oAAAL9SURBVGje7Zq7ThtBFIb3EfwIPIIfgTfANZWr1O6DhLuUQBspynZWinALDUhgF0gkUiQih2Yb1kUokJCMEAVUy/7IA8fHs7uzu3M2e/GRjnzRaubfb2bOnLk4jpAFQdAPqm2Xobek4KyqWp4en4PxoRf8HlyV3qETeontSQHaVzV87x0Hn9e+Vcahl1pWAO3Qt0Ifhj6N6qN3/rRScJTf/L3NBmgGZmg6iFFRYwCFz25yABivKIw6ek3jAIXPfeU94+TTubbwo41hswBxOBdfLmMLbxQgDme08yux8MYAygKnMYCywmkEoDxwag8oL5xaAwq/b+eFU1tA4WfHBpw6A/JtwKklINp7vDM/d+F1BOSqH4MPR0tAGkDYOQsebh+tFF5HQFZfZgkowTFMqdkYtkW6u747t+3qSLQ23RPC0MXM+OPjWekdOqF3bstVAhAdZhW3niMVL9Aa7ISgaravkkSxgIrxjA025Fd8a7aMzqwvDqhqvgRUJCAMHxX58VmmA0KkFlSbaaphBRAq8059bVTDFIkj3P8FBictd9fTyDM6zK6igExnJohEDysSTlSjcRsfeDKA0Dr8WBkzFFoFzg/+i4TE4eBdlDboxixKteF5q4B4+h11NobnaBZtY/vEpFebbPYhNFBtuuG2kCSaAkJcMT04BCSarkuvxWhdabShhydk/6sK0CjpZVShplsidDgmibZ1VcVUG+1x9H0RIpitKEBd9Y//899C3MDvtwB36KXOKSTzK9qzTbXR91H3C/idIHQaftzzZ+5G2MH7jTAaANNM4SpmqalfwunyII022ngRs1+bA2pRSJFTZIYeVJRlARRh3ajj5tbs4uV9XH5T1u0OU208XaGr97fAbHgJk7qb5liIrYxHmvJsej9u6l7YzJvPtCezMlp5L2Wu0BgVJ0QzptuOsM1e9FVb3JpQo60rdu8ZlWEhiFkBonTblVYFxGvrZNDmSgjZThEW+k6BRtMVA3OlW2sSU/nIONjZ19amia/GoLuTpswXoaTwsnKAkdEAAAAASUVORK5CYII=';\n    }\n\n    var feetforMiles = 0.000189394;\n    var mielsTodispatch = parseFloat(truckItem.dist).toFixed(2);\n\n    this.results.push({\n      display: truckItem.truckId + \" : \" + truckItem.techID,\n      value: 1,\n      Latitude: truckItem.lat,\n      Longitude: truckItem.long\n    });\n\n    var truckUrl = this.getTruckUrl(truckColor);\n    const listOfPushPins = maps.entities;\n    var isNewTruck = true;\n\n    var metadata = {\n      truckId: truckItem.truckId,\n      ATTUID: truckItem.techID,\n      truckStatus: truckItem.truckCol,\n      truckCol: truckItem.truckCol,\n      jobType: truckItem.jobType,\n      WRJobType: truckItem.workType,\n      WRStatus: truckItem.wrStat,\n      AssingedWRID: truckItem.wrID,\n      Speed: truckItem.speed,\n      Distance: mielsTodispatch,\n      CurrentIdleTime: truckItem.idleTime,\n      ETA: truckItem.totIdleTime,\n      Email: '',// truckItem.Email,\n      Mobile: '', // truckItem.Mobile,\n      icon: iconUrl,\n      iconInfo: infoBoxTruckUrl,\n      CurrentLat: truckItem.lat,\n      CurrentLong: truckItem.long,\n      WRLat: truckItem.wrLat,\n      WRLong: truckItem.wrLong,\n      techIds: this.reportingTechnicians,\n      jobId: truckItem.jobId,\n      managerIds: this.managerIds,\n      workAddress: truckItem.workAddress,\n      sbcVin: truckItem.sbcVin,\n      customerName: truckItem.customerName,\n      technicianName: truckItem.technicianName,\n      dispatchTime: truckItem.dispatchTime,\n      region: truckItem.zone\n    };\n\n    let jobIdString = 'http://edge-edt.it.att.com/cgi-bin/edt_jobinfo.cgi?';\n\n    let zone = truckItem.zone;\n\n    // = M for MW\n    // = W for West\n    // = B for SE\n    // = S for SW\n    if (zone != null && zone != undefined) {\n      if (zone === 'MW') {\n        zone = 'M';\n      } else if (zone === 'SE') {\n        zone = 'B'\n      } else if (zone === 'SW') {\n        zone = 'S'\n      }\n    } else {\n      zone = '';\n    }\n\n    jobIdString = jobIdString + 'edt_region=' + zone + '&wrid=' + truckItem.wrID;\n\n    truckItem.jobId = truckItem.jobId == undefined || truckItem.jobId == null ? '' : truckItem.jobId;\n\n    if (truckItem.jobId != '') {\n      jobIdUrl = '<a href=\"' + jobIdString + '\" target=\"_blank\" title=\"Click here to see actual Force/Edge job data\">' + truckItem.jobId + '</a>';\n    }\n\n    if (truckItem.dispatchTime != null && truckItem.dispatchTime != undefined && truckItem.dispatchTime != '') {\n      let dispatchDate = truckItem.dispatchTime.split(':');\n      let dt = dispatchDate[0] + ' ' + dispatchDate[1] + ':' + dispatchDate[2] + ':' + dispatchDate[3];\n      metadata.dispatchTime = that.UTCToTimeZone(dt);\n    }\n\n    // Update in the TruckWatchList session\n    if (sessionStorage.getItem('TruckWatchList') !== null) {\n      this.truckList = JSON.parse(sessionStorage.getItem('TruckWatchList'));\n\n      if (this.truckList.length > 0) {\n        if (this.truckList.some(x => x.truckId == truckItem.truckId) == true) {\n          let item = this.truckList.find(x => x.truckId == truckItem.truckId);\n          const index: number = this.truckList.indexOf(item);\n          if (index !== -1) {\n            item.Distance = metadata.Distance;\n            item.icon = metadata.icon;\n            this.truckList.splice(index, 1);\n            this.truckList.splice(index, 0, item);\n            this.mapService.storeDataInSessionStorage('TruckWatchList', this.truckList);\n            item = null;\n          }\n        }\n      }\n    }\n\n    // Update in the SelectedTruck session\n    if (sessionStorage.getItem('TruckDetails') !== 'undefined') {\n      let selectedTruck: any;\n      selectedTruck = JSON.parse(sessionStorage.getItem('TruckDetails'));\n\n      if (selectedTruck != null) {\n        if (selectedTruck.truckId == truckItem.truckId) {\n          sessionStorage.removeItem('TruckDetails');\n          this.mapService.storeDataInSessionStorage('TruckDetails', metadata);\n          selectedTruck = null;\n        }\n      }\n    }\n\n    if (this.truckItems.length > 0 && this.truckItems.some(x => x.toLowerCase() == truckItem.truckId.toLowerCase())) {\n      isNewTruck = false;\n      // If it is not a new truck then move the truck to new location\n      for (let i = 0; i < listOfPushPins.getLength(); i++) {\n        if (listOfPushPins.get(i).metadata.truckId === truckItem.truckId) {\n          var curPushPin = listOfPushPins.get(i);\n          curPushPin.metadata = metadata;\n          destLoc = pinLocation;\n          pinLocation = listOfPushPins.get(i).getLocation();\n\n          let truckIdRanId = truckItem.truckId + '_' + Math.random();\n\n          this.animationTruckList.forEach((item, index) => {\n            if (item.indexOf(truckItem.truckId) > -1) {\n              this.animationTruckList.splice(index, 1);\n            }\n          });\n          this.animationTruckList.push(truckIdRanId);\n\n          this.loadDirections(this, pinLocation, destLoc, i, truckUrl, truckIdRanId);\n\n          return;\n        }\n      }\n    } else {\n      this.truckItems.push(truckItem.truckId);\n      NewPin = new Microsoft.Maps.Pushpin(pinLocation, { icon: truckUrl });\n\n      NewPin.metadata = metadata;\n      this.map.entities.push(NewPin);\n\n      this.dataLayer.push(NewPin);\n      if (this.isMapLoaded) {\n        this.isMapLoaded = false;\n        this.map.setView({ center: pinLocation, zoom: this.lastZoomLevel });\n        that.lastZoomLevel = this.map.getZoom();\n        that.lastLocation = this.map.getCenter();\n      }\n\n      Microsoft.Maps.Events.addHandler(NewPin, 'mouseout', (e) => {\n        this.infobox.setOptions({ visible: false });\n      });\n\n      if ($(window).width() < 1024) {\n        Microsoft.Maps.Events.addHandler(NewPin, 'click', (e) => {\n          this.infobox.setOptions({\n            showPointer: true,\n            location: e.target.getLocation(),\n            visible: true,\n            showCloseButton: true,\n            offset: new Microsoft.Maps.Point(0, 20),\n            htmlContent: '<div class = \"infy infyMappopup\">'\n              + getInfoBoxHTML(e.target.metadata, this.thresholdValue, jobIdUrl) + '</div>'\n          });\n\n          this.truckWatchList = [{ TruckId: e.target.metadata.truckId, Distance: e.target.metadata.Distance }];\n\n          this.mapService.storeDataInSessionStorage('selectedTruck', e.target.metadata);\n          this.mapService.storeDataInSessionStorage('TruckDetails', e.target.metadata);\n\n          // A buffer limit to use to specify the infobox must be away from the edges of the map.\n\n          var buffer = 30;\n          var infoboxOffset = that.infobox.getOffset();\n          var infoboxAnchor = that.infobox.getAnchor();\n          var infoboxLocation = maps.tryLocationToPixel(e.target.getLocation(), Microsoft.Maps.PixelReference.control);\n          var dx = infoboxLocation.x + infoboxOffset.x - infoboxAnchor.x;\n          var dy = infoboxLocation.y - 25 - infoboxAnchor.y;\n\n          if (dy < buffer) { // Infobox overlaps with top of map.\n            // #### Offset in opposite direction.\n            dy *= -1;\n            // #### add buffer from the top edge of the map.\n            dy += buffer;\n          } else {\n            // #### If dy is greater than zero than it does not overlap.\n            dy = 0;\n          }\n\n          if (dx < buffer) { // Check to see if overlapping with left side of map.\n            // #### Offset in opposite direction.\n            dx *= -1;\n            // #### add a buffer from the left edge of the map.\n            dx += buffer;\n          } else { // Check to see if overlapping with right side of map.\n            dx = maps.getWidth() - infoboxLocation.x + infoboxAnchor.x - that.infobox.getWidth();\n            // #### If dx is greater than zero then it does not overlap.\n            if (dx > buffer) {\n              dx = 0;\n            } else {\n              // #### add a buffer from the right edge of the map.\n              dx -= buffer;\n            }\n          }\n\n          // #### Adjust the map so infobox is in view\n          if (dx != 0 || dy != 0) {\n            maps.setView({\n              centerOffset: new Microsoft.Maps.Point(dx, dy),\n              center: maps.getCenter()\n            });\n          }\n\n          let selectedTruck: any;\n          selectedTruck = this.mapService.retrieveDataFromSessionStorage('selectedTruck');\n\n          if (selectedTruck != null) {\n            const technicianDetails = this.reportingTechnicianDetails.find(\n              x => x.attuid.toLowerCase() == selectedTruck.ATTUID.toLowerCase());\n\n            if (technicianDetails != null) {\n              this.technicianEmail = technicianDetails.email;\n              this.technicianPhone = technicianDetails.phone;\n              this.technicianName = technicianDetails.name;\n            }\n          }\n          Microsoft.Maps.Events.addHandler(this.infobox, 'click', viewTruckDetails);\n        });\n      } else {\n        Microsoft.Maps.Events.addHandler(NewPin, 'mouseover', (e) => {\n          this.infobox.setOptions({\n            showPointer: true,\n            location: e.target.getLocation(),\n            visible: true,\n            showCloseButton: true,\n            offset: new Microsoft.Maps.Point(0, 20),\n            htmlContent: '<div class = \"infy infyMappopup\">'\n              + getInfoBoxHTML(e.target.metadata, this.thresholdValue, jobIdUrl) + '</div>'\n          });\n\n          this.truckWatchList = [{ TruckId: e.target.metadata.truckId, Distance: e.target.metadata.Distance }];\n\n          this.mapService.storeDataInSessionStorage('selectedTruck', e.target.metadata);\n          this.mapService.storeDataInSessionStorage('TruckDetails', e.target.metadata);\n\n          // A buffer limit to use to specify the infobox must be away from the edges of the map.\n\n          var buffer = 30;\n          var infoboxOffset = that.infobox.getOffset();\n          var infoboxAnchor = that.infobox.getAnchor();\n          var infoboxLocation = maps.tryLocationToPixel(e.target.getLocation(), Microsoft.Maps.PixelReference.control);\n          var dx = infoboxLocation.x + infoboxOffset.x - infoboxAnchor.x;\n          var dy = infoboxLocation.y - 25 - infoboxAnchor.y;\n\n          if (dy < buffer) { // Infobox overlaps with top of map.\n            // #### Offset in opposite direction.\n            dy *= -1;\n            // #### add buffer from the top edge of the map.\n            dy += buffer;\n          } else {\n            // #### If dy is greater than zero than it does not overlap.\n            dy = 0;\n          }\n\n          if (dx < buffer) { // Check to see if overlapping with left side of map.\n            // #### Offset in opposite direction.\n            dx *= -1;\n            // #### add a buffer from the left edge of the map.\n            dx += buffer;\n          } else { // Check to see if overlapping with right side of map.\n            dx = maps.getWidth() - infoboxLocation.x + infoboxAnchor.x - that.infobox.getWidth();\n            // #### If dx is greater than zero then it does not overlap.\n            if (dx > buffer) {\n              dx = 0;\n            } else {\n              // #### add a buffer from the right edge of the map.\n              dx -= buffer;\n            }\n          }\n\n          // #### Adjust the map so infobox is in view\n          if (dx != 0 || dy != 0) {\n            maps.setView({\n              centerOffset: new Microsoft.Maps.Point(dx, dy),\n              center: maps.getCenter()\n            });\n          }\n\n          let selectedTruck: any;\n          selectedTruck = this.mapService.retrieveDataFromSessionStorage('selectedTruck');\n\n          if (selectedTruck != null) {\n            const technicianDetails = this.reportingTechnicianDetails.find(\n              x => x.attuid.toLowerCase() == selectedTruck.ATTUID.toLowerCase());\n\n            if (technicianDetails != null) {\n              this.technicianEmail = technicianDetails.email;\n              this.technicianPhone = technicianDetails.phone;\n              this.technicianName = technicianDetails.name;\n            }\n          }\n          Microsoft.Maps.Events.addHandler(this.infobox, 'click', viewTruckDetails);\n\n        });\n      }\n\n      Microsoft.Maps.Events.addHandler(maps, 'viewchange', mapViewChanged);\n\n      // this.ChangeTruckDirection(this, NewPin, destLoc, truckUrl);\n    }\n\n    function mapViewChanged(e) {\n      that.lastZoomLevel = maps.getZoom();\n      that.lastLocation = maps.getCenter();\n    }\n    function mousewheelChanged(e) {\n      that.lastZoomLevel = maps.getZoom();\n      that.lastLocation = maps.getCenter();\n    }\n\n    function getInfoBoxHTML(data: any, tValue, jobId): String {\n\n      if (!data.Speed) {\n        data.Speed = 0;\n      }\n\n      var className = \"\";\n      var styleLeft = \"\";\n      var reason = '';\n      if (data.truckStatus != undefined) {\n        if (data.truckStatus.toLocaleLowerCase() == 'red') {\n          reason = \"<div class='row' style='margin-top:3px;color:red;'>Reason: Cumulative idle time is beyond \" + tValue + \" mins</div>\";\n        } else if (data.truckStatus.toLocaleLowerCase() == 'purple') {\n          reason = \"<div class='row' style='margin-top:3px;color:purple;'>Reason: Truck is driven greater than 75 m/h</div>\";\n        }\n      }\n\n      let infoboxData = '';\n\n      data.customerName = data.customerName == undefined || data.customerName == null ? '' : data.customerName;\n\n      data.dispatchTime = data.dispatchTime == undefined || data.dispatchTime == null ? '' : data.dispatchTime;\n\n      data.jobId = data.jobId == undefined || data.jobId == null ? '' : data.jobId;\n\n      data.workAddress = data.workAddress == undefined || data.workAddress == null ? '' : data.workAddress;\n\n      data.sbcVin = data.sbcVin == undefined || data.sbcVin == null || data.sbcVin == '' ? '' : data.sbcVin;\n\n      data.technicianName = data.technicianName == undefined || data.technicianName == null || data.technicianName == '' ? '' : data.technicianName;\n\n      if ($(window).width() < 1024) {\n        infoboxData = \"<div class='popModalContainer'><div class='popModalHeader'><img src='\" + data.iconInfo + \"' ><a class='details' title='Click here to see technician details' >View Details</a><i class='fa fa-times' aria-hidden='true' style='cursor: pointer'></i></div>\"\n          + \"<hr/><div class='popModalBody'>\"\n          + \"<div class='row'>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>Vehicle Number :</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.sbcVin + \"</span></div></div></div>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>VTS Unit ID :</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.truckId + \"</span></div></div></div>\"\n          + \"</div>\"\n          + \"<div class='row'>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>Job Type :</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.jobType + \"</span></div></div></div>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>Job Id :</label><div class='col col-sm-7'><span class='col-form-label'>\" + jobId + \"</span></div></div></div>\"\n          + \"</div>\"\n          + \"<div class='row'>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>ATTUID :</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.ATTUID + \"</span></div></div></div>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>Technician Name :</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.technicianName + \"</span></div></div></div>\"\n          + \"</div>\"\n          + \"<div class='row'>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>Customer Name :</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.customerName + \"</span></div></div></div>\"\n          + \"<div class='col-md-6'>\"\n          + \"<div class='form-group row'><label class='col col-sm-5 col-form-label'>Dispatch Time:</label><div class='col col-sm-7'><span class='col-form-label'>\" + data.dispatchTime + \"</span></div></div></div>\"\n          + \"</div>\"\n          + \"<div class='row'>\"\n          + \"<div class='col-md-12'>\"\n          + \"<div class='form-group row'><label class='col-12 col-sm-12 col-form-label'>Job Address :</label><div class='col-12 col-sm-12'><span class='col-form-label col-form-label-full'>\" + data.workAddress + \"</span></div></div></div>\"\n          + \"</div>\"\n          + \"<div class='row meterCal'>\"\n          + \"<div class='col-12 col-md-4'><strong>\" + data.Speed + \"</strong> mph <span class='infoBox-bottom1'>Speed</span></div>\"\n          + \"<div class='col-12 col-md-4'><strong>\" + data.ETA + \"</strong> Mins <span class='infoBox-bottom1'>Cumulative Idle Minutes</span></div>\"\n          + \"<div class='col-12 col-md-4'><strong>\" + that.convertMilesToFeet(data.Distance) + \"</strong> Ft <span class='infoBox-bottom1'>Feet to Job Site</span></div>\"\n          + \"</div>\"\n          + \"</div> <hr/>\"\n          + \"<div class='popModalFooter'><div class='row'>\"\n          + \"<div class='col col-md-4'><i class='fa fa-commenting'></i><span class='sms' title='Click to send SMS' >SMS</p></div>\"\n          + \"<div class='col col-md-4'><i class='fa fa-envelope' aria-hidden='true'></i><span class='email' title='Click to send email' >Email</p></div>\"\n          + \"<div class='col col-md-4'><i class='fa fa-eye' aria-hidden='true'></i><span class='watchlist' title='Click to add in watchlist' >Watch</p></div>\"\n          + \"</div> </div>\"\n          + \"</div>\";\n\n      } else {\n        infoboxData = \"<div class='row' style='padding-top:10px;margin: 0px;'>\"\n          + \"<div class='col-md-3'><div style='padding-top:15px;' ><img src='\" + data.iconInfo + \"' style='display: block;margin: 0 auto;' ></div></div>\" +\n          \"<div class='col-md-9'>\" +\n          \"<div class='row '>\" +\n          \"<div class='col-md-8' style='padding-left:0px;padding-right:0px;' ><span style='font-weight:bold;'>Vehicle Number</span>&nbsp;:&nbsp;\" + data.sbcVin + \"</div>\" +\n          \"<div class='col-md-4' style='padding-left:0px;padding-right:0px;' ><a class='details' style='color:#009FDB;cursor: pointer;'  title='Click here to see technician details' >View Details</a><i class='fa fa-times' style='padding-left:15px;cursor: pointer;' aria-hidden='true' style='cursor: pointer'></i></div>\" +\n          \"</div>\" +\n          \"<div class='row'><div><span style='font-weight:bold;'>VTS Unit ID</span>&nbsp;:&nbsp;\" + data.truckId + \"</div></div>\" +\n          \"<div class='row'><div class='col-md-5' style='padding-left:0px;padding-right:0px;' ><span style='font-weight:bold;'>Job Type</span>&nbsp;:&nbsp;\" + data.jobType + \"</div><div class='col-md-7' style='padding-left:0px;padding-right:0px;' ><span style='font-weight:bold;' >Job Id</span>&nbsp;:&nbsp;\" + jobId + \"</div></div>\"\n          + reason + \"</div></div>\"\n          + \"<div class='infoRow' style='padding-left:5px;padding-right:5px;'><span style='font-weight:bold;'>ATTUID</span>&nbsp;:&nbsp;\" + data.ATTUID + \"<span style='font-weight:bold;margin-left:8px;'>Technician Name</span>&nbsp;:&nbsp;\" + data.technicianName + \"</div>\"\n          + \"<div class='infoRow' style='padding-left:5px;padding-right:5px;' >\"\n          + \"<div><span style='font-weight:bold;'>Customer Name</span>&nbsp;:&nbsp;\" + data.customerName + \"</div>\"\n          + \"</div>\"\n          + \"<div class='infoRow' style='padding-left:5px;padding-right:5px;' >\"\n          + \"<div><span style='font-weight:bold;'>Dispatch Time</span>&nbsp;:&nbsp;\" + data.dispatchTime + \"</div>\"\n          + \"</div>\"\n          + \"<div class='infoRow' style='padding-left:5px;padding-right:5px;' >\"\n          + \"<div><span style='font-weight:bold;'>Job Address</span>&nbsp;:&nbsp;\" + data.workAddress + \"</div>\"\n          + \"</div>\"\n          + \"<hr style='margin-top:1px; margin-bottom:5px;' />\"\n\n          + \"<div style='margin-left: 10px;'> <div class='row'> <div class='speed col-md-3'> <div class='row' style='margin-left: 1px'><p style='font-weight: bolder;font-size: 23px;margin: 0px;'>\" + data.Speed + \"</p><p style='margin: 10px 10px;'>mph</p></div><p style='margin:0px' class='infoBox-bottom1'>Speed</p></div>\"\n          + \"<div class='idle col-md-5'><div class='row' style='margin-left: 10px'><p style='font-weight: bolder;font-size: 23px;margin: 0px;'>\" + data.ETA + \"</p><p style='margin: 10px 10px;'>Mins</p></div><p style='margin:0px' class='infoBox-bottom1'>Cumulative Idle Minutes</p></div> <div class='miles col-md-4'>\"\n          + \"<div class='row' style='margin-left: 10px'><p style='font-weight: bolder;font-size: 23px;margin: 0px;'>\" + that.convertMilesToFeet(data.Distance) + \"</p><p style='margin: 10px 10px;'>Ft</p></div><p style='margin:0px' class='infoBox-bottom1'>Feet to Job Site</p></div>\"\n          + \"</div></div><hr style='margin-top:1px; margin-bottom:5px;' />\"\n          + \"<div class='row' style='cursor: pointer'> <div class='col-md-1'></div><div class='row col-md-3' style='\" + className + \"'> <i class='fa fa-commenting col-md-2'></i><p class='col-md-6 sms' title='Click to send SMS' >SMS</p></div>\"\n          + \"<div class='row col-md-3 offset-md-1' style='\" + className + \"'> <i class='fa fa-envelope col-md-2' aria-hidden='true'></i><p class='col-md-6 email' title='Click to send email' >Email</p></div>\"\n          + \"<div class='row col-md-3'></div>\"\n          + \"<div class='row col-md-3' style='\" + styleLeft + \"'><i class='fa fa-eye col-md-2' aria-hidden='true'></i><p class='col-md-6 watchlist' title='Click to add in watchlist' >Watch</p></div> </div>\";\n      }\n\n      return infoboxData;\n    }\n\n    function viewTruckDetails(e) {\n      if (e.originalEvent.target.className === 'fa fa-times') {\n        that.infobox.setOptions({\n          visible: false\n        });\n      }\n      if (e.originalEvent.target.className === 'details') {\n        //that.router.navigate(['/technician-details']);\n      }\n\n      if (e.originalEvent.target.className === 'col-md-6 sms') {\n        let selectedTruck: any;\n        selectedTruck = that.mapService.retrieveDataFromSessionStorage('selectedTruck');\n\n        if (selectedTruck != null) {\n          const technicianDetails = that.reportingTechnicianDetails.find(\n            x => x.attuid.toLowerCase() == selectedTruck.ATTUID.toLowerCase());\n\n          if (technicianDetails != null) {\n            this.technicianEmail = technicianDetails.email;\n            this.technicianPhone = technicianDetails.phone;\n            this.technicianName = technicianDetails.name;\n          }\n        }\n        jQuery('#myModalSMS').modal('show');\n      }\n\n      if (e.originalEvent.target.className === 'col-md-6 email') {\n        let selectedTruck: any;\n        selectedTruck = that.mapService.retrieveDataFromSessionStorage('selectedTruck');\n\n        if (selectedTruck != null) {\n          const technicianDetails = that.reportingTechnicianDetails.find(\n            x => x.attuid.toLowerCase() == selectedTruck.ATTUID.toLowerCase());\n\n          if (technicianDetails != null) {\n            this.technicianEmail = technicianDetails.email;\n            this.technicianPhone = technicianDetails.phone;\n            this.technicianName = technicianDetails.name;\n          }\n        }\n        jQuery('#myModalEmail').modal('show');\n      }\n     \n    }\n  }\n\n  loadDirections(that, startLoc, endLoc, index, truckUrl, truckIdRanId) {\n    Microsoft.Maps.loadModule('Microsoft.Maps.Directions', () => {\n      this.directionsManager = new Microsoft.Maps.Directions.DirectionsManager(that.map);\n      // Set Route Mode to driving\n      this.directionsManager.setRequestOptions({\n        routeMode: Microsoft.Maps.Directions.RouteMode.driving\n      });\n      this.directionsManager.setRenderOptions({\n        drivingPolylineOptions: {\n          strokeColor: 'green',\n          strokeThickness: 3,\n          visible: false\n        },\n        waypointPushpinOptions: { visible: false },\n        viapointPushpinOptions: { visible: false },\n        autoUpdateMapView: false\n      });\n\n      const waypoint1 = new Microsoft.Maps.Directions.Waypoint({\n        location: new Microsoft.Maps.Location(startLoc.latitude, startLoc.longitude), icon: ''\n      });\n      const waypoint2 = new Microsoft.Maps.Directions.Waypoint({\n        location: new Microsoft.Maps.Location(endLoc.latitude, endLoc.longitude)\n      });\n      this.directionsManager.addWaypoint(waypoint1);\n      this.directionsManager.addWaypoint(waypoint2);\n\n      // Add event handler to directions manager.\n      Microsoft.Maps.Events.addHandler(this.directionsManager, 'directionsUpdated', function (e) {\n        // const that = this;\n        console.log(e);\n        var routeIndex = e.route[0].routeLegs[0].originalRouteIndex;\n        var nextIndex = routeIndex;\n        if (e.route[0].routePath.length > routeIndex) {\n          nextIndex = routeIndex + 1;\n        }\n        var nextLocation = e.route[0].routePath[nextIndex];\n        var pin = that.map.entities.get(index);\n        // var bearing = that.calculateBearing(startLoc,nextLocation);\n        that.MovePinOnDirection(that, e.route[0].routePath, pin, truckUrl, truckIdRanId);\n      });\n\n      this.directionsManager.calculateDirections();\n    });\n  }\n\n  MovePinOnDirection(that, routePath, pin, truckUrl, truckIdRanId) {\n    that = this;\n    var isGeodesic = false;\n    that.currentAnimation = new Bing.Maps.Animations.PathAnimation(routePath, function (coord, idx, frameIdx, rotationAngle, locations, truckIdRanId) {\n\n      if (that.animationTruckList.length > 0 && that.animationTruckList.some(x => x == truckIdRanId)) {\n        var index = (frameIdx == locations.length - 1) ? frameIdx : frameIdx + 1;\n        var rotationAngle = that.calculateBearing(coord, locations[index]);\n        if (that.isOdd(frameIdx)) {\n          that.createRotatedImagePushpin(pin, truckUrl, rotationAngle);\n        }\n        else if (frameIdx == locations.length - 1) {\n          that.createRotatedImagePushpin(pin, truckUrl, rotationAngle);\n        }\n        pin.setLocation(coord);\n      }\n\n    }, isGeodesic, that.travalDuration, truckIdRanId);\n\n    that.currentAnimation.play();\n  }\n\n  CalculateNextCoord(startLocation, endLocation) {\n    try {\n\n      var dlat = (endLocation.latitude - startLocation.latitude);\n      var dlon = (endLocation.longitude - startLocation.longitude);\n      var alpha = Math.atan2(dlat * Math.PI / 180, dlon * Math.PI / 180);\n      var dx = 0.00015238794727909931;\n      dlat = dx * Math.sin(alpha);\n      dlon = dx * Math.cos(alpha);\n      var nextCoord = new Microsoft.Maps.Location(startLocation.latitude + dlat, startLocation.longitude + dlon);\n\n      dlat = null;\n      dlon = null;\n      alpha = null;\n      dx = null;\n\n      return nextCoord;\n    } catch (error) {\n      console.log('Error in CalculateNextCoord - ' + error);\n    }\n  }\n\n  isOdd(num) {\n    return num % 2;\n  }\n\n  degToRad(x) {\n    return x * Math.PI / 180;\n  }\n\n  radToDeg(x) {\n    return x * 180 / Math.PI;\n  }\n\n  calculateBearing(origin, dest) {\n    /// <summary>Calculates the bearing between two loacations.</summary>\n    /// <param name=\"origin\" type=\"Microsoft.Maps.Location\">Initial location.</param>\n    /// <param name=\"dest\" type=\"Microsoft.Maps.Location\">Second location.</param>\n    try {\n      var lat1 = this.degToRad(origin.latitude);\n      var lon1 = origin.longitude;\n      var lat2 = this.degToRad(dest.latitude);\n      var lon2 = dest.longitude;\n      var dLon = this.degToRad(lon2 - lon1);\n      var y = Math.sin(dLon) * Math.cos(lat2);\n      var x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n\n      lat1 = lat2 = lon1 = lon2 = dLon = null;\n\n      return (this.radToDeg(Math.atan2(y, x)) + 360) % 360;\n    } catch (error) {\n      console.log('Error in calculateBearing - ' + error);\n    }\n  }\n\n  SendSMS(form) {\n    // if(this.technicianPhone != ''){\n    if (form.value.mobileNo != '') {\n      if (confirm('Are you sure want to send SMS?')) {\n        // this.mapService.sendSMS(this.technicianPhone,form.value.smsMessage);\n        this.mapService.sendSMS(form.value.mobileNo, form.value.smsMessage);\n\n        form.controls.smsMessage.reset()\n        form.value.mobileNo = this.technicianPhone;\n        jQuery('#myModalSMS').modal('hide');\n        //this.toastr.success('SMS sent successfully', 'Success');\n      }\n    }\n\n  }\n\n  SendEmail(form) {\n    // if(this.technicianEmail != ''){\n    if (form.value.emailId != '') {\n      if (confirm('Are you sure want to send Email?')) {\n\n        // this.userProfileService.getUserData(this.cookieATTUID)\n        //   .subscribe((data) => {\n        //     var newData: any = this.stringifyJson(data);\n        //     //this.mapService.sendEmail(newData.email,this.technicianEmail,newData.lastName + ' ' + newData.firstName, this.technicianName, form.value.emailSubject,form.value.emailMessage);\n        //     this.mapService.sendEmail(newData.email, form.value.emailId, newData.lastName + ' ' + newData.firstName, this.technicianName, form.value.emailSubject, form.value.emailMessage);\n        //     this.toastr.success(\"Email sent successfully\", 'Success');\n\n        //     form.controls.emailSubject.reset()\n        //     form.controls.emailMessage.reset()\n        //     form.value.emailId = this.technicianEmail;\n        //     jQuery('#myModalEmail').modal('hide');\n        //   });\n      }\n    }\n  }\n\n  SearchTruck(form) {\n    const that = this;\n\n    //$('#loading').show();\n\n    if (form.value.inputmiles != '' && form.value.inputmiles != null) {\n      const lt = that.clickedLat;\n      const lg = that.clickedLong;\n      const rd = form.value.inputmiles;\n\n      this.foundTruck = false;\n      this.animationTruckList = [];\n\n      if (this.connection !== undefined) {\n        this.connection.unsubscribe();\n      }\n\n      this.loadMapView('road');\n\n      that.LoadTrucks(this.map, lt, lg, rd, true);\n\n      form.controls.inputmiles.reset();\n      jQuery('#myRadiusModal').modal('hide');\n      setTimeout(() => {\n        //$('#loading').hide();\n      }, 10000);\n    }\n  }\n\n\n\n  getMiles(i) {\n    return i * 0.000621371192;\n  }\n\n  getMeters(i) {\n    return i * 1609.344;\n  }\n\n  stringifyJson(data) {\n    return JSON.stringify(data);\n  }\n  parseToJson(data) {\n    return JSON.parse(data);\n  }\n\n  Round(number, precision) {\n    var factor = Math.pow(10, precision);\n    var tempNumber = number * factor;\n    var roundedTempNumber = Math.round(tempNumber);\n    return roundedTempNumber / factor;\n  }\n\n  getAtan2(y, x) {\n    return Math.atan2(y, x);\n  };\n\n  getIconUrl(color: string, sourceLat: number, sourceLong: number, destinationLat: number, destinationLong: number) {\n    var iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAA3ZJREFUaIHtl11IU2EYx/9vuVqQaxeB6wv0KscIF4G0bpoaZnWzhVpdVEp1ERrmpChvMgjrIhT6oKBZ6EXUAueNaFH0QTSxyAWVXRQuP1Avsu3M5nHani7clunZx9lmCL6/q3PO8/Kc//95vwEOh8PhcDgcDoezVGGpSEJEagBVqcglgYsx1hwpmJZsdiJSByjwYcz3c+2wZ8SfbL65bFmvUxORkTFWLhWX3QPBau8EoA9+0k9Mifu2Xd2pEEQhCanSWPIqYTFWAEAWY8w1Ny6rB4ioajrw+1LasuWr+370j49PeqczVBlK19h3thDiAcDh6gZQAQCZABI3QET3AJRde3UbVkcLBFFYDcxUaEdmborkyicuAyHxlrZa2HrsCyxJHstiNVjM4oEYBha7eCCKASIyYpGLB6LMgclp/5nX395M2Xrsiv8pSC4RDaxMW7G3vfdJXEnSlekpEzSXNUpV1HjUVWjAPRTzB4LohU6TjRK9Ka72cinOMYUenVLxpI8Sth47SvUmNJovJ5sqGtWMMbdUIGkDgiig8JYZhqzUb2alejNK9CYgQvWBJAzoNFp8GukNvzv6uhNNNS9XCEMcO7wsAyqlCg2mehRpC8LfGp7fQMOLm3LShDm2/Qhq8iqhCi4CDlc3LPZaWXNJloGmQ9exSb0Rxx+cgkcUoNNoUWOswJpVKlzokDcHjhuOoq7oHJq6WtD55RkAoMZYCVt5M3bf2o94D4cRDYjT4qhOo80IDY0i7S4YMnNhaNwVrpCjrxuD7iFYD16H1dEiq3IWYwUeOdv+MV7cdwRd1c9QutUMq6MZOet0UwAUkDiFxjSgTFPePptfVeuZ8CgG3EMo3JyPLtfbeSI7e58CAAqzCyTHsRQ6jRYqZTpszvk7vM1px+7sfBARCjYbFQBeSt0DYhpgjNURkbrRfDl8VRzxjvoBrJjdThXcaC7uOR+X+NlIbVKb1BtmenpmAr8EYJrXaLbOeH5ERHrMXCjsdZ1XYHX8vaI2mOpRutUMAGYAkmu1FOOTvgOD7sET++8eXh4a7zqNFo9PtoaFR1r7E4aIyoiIPg730p03zdT/c5CClCWQSy2I3q/ChBB4+L6VOj4/JSKiQCDgCRZsYSAiozg12f7j15jT55+4Hzy1JppLTUSnPaL3nc/v6yKiuuCdm8PhcDicpcEfk3eALbc1+VQAAAAASUVORK5CYII=\";\n\n    if (color.toLowerCase() == \"green\") {\n      iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAA3ZJREFUaIHtl11IU2EYx/9vuVqQaxeB6wv0KscIF4G0bpoaZnWzhVpdVEp1ERrmpChvMgjrIhT6oKBZ6EXUAueNaFH0QTSxyAWVXRQuP1Avsu3M5nHani7clunZx9lmCL6/q3PO8/Kc//95vwEOh8PhcDgcDoezVGGpSEJEagBVqcglgYsx1hwpmJZsdiJSByjwYcz3c+2wZ8SfbL65bFmvUxORkTFWLhWX3QPBau8EoA9+0k9Mifu2Xd2pEEQhCanSWPIqYTFWAEAWY8w1Ny6rB4ioajrw+1LasuWr+370j49PeqczVBlK19h3thDiAcDh6gZQAQCZABI3QET3AJRde3UbVkcLBFFYDcxUaEdmborkyicuAyHxlrZa2HrsCyxJHstiNVjM4oEYBha7eCCKASIyYpGLB6LMgclp/5nX395M2Xrsiv8pSC4RDaxMW7G3vfdJXEnSlekpEzSXNUpV1HjUVWjAPRTzB4LohU6TjRK9Ka72cinOMYUenVLxpI8Sth47SvUmNJovJ5sqGtWMMbdUIGkDgiig8JYZhqzUb2alejNK9CYgQvWBJAzoNFp8GukNvzv6uhNNNS9XCEMcO7wsAyqlCg2mehRpC8LfGp7fQMOLm3LShDm2/Qhq8iqhCi4CDlc3LPZaWXNJloGmQ9exSb0Rxx+cgkcUoNNoUWOswJpVKlzokDcHjhuOoq7oHJq6WtD55RkAoMZYCVt5M3bf2o94D4cRDYjT4qhOo80IDY0i7S4YMnNhaNwVrpCjrxuD7iFYD16H1dEiq3IWYwUeOdv+MV7cdwRd1c9QutUMq6MZOet0UwAUkDiFxjSgTFPePptfVeuZ8CgG3EMo3JyPLtfbeSI7e58CAAqzCyTHsRQ6jRYqZTpszvk7vM1px+7sfBARCjYbFQBeSt0DYhpgjNURkbrRfDl8VRzxjvoBrJjdThXcaC7uOR+X+NlIbVKb1BtmenpmAr8EYJrXaLbOeH5ERHrMXCjsdZ1XYHX8vaI2mOpRutUMAGYAkmu1FOOTvgOD7sET++8eXh4a7zqNFo9PtoaFR1r7E4aIyoiIPg730p03zdT/c5CClCWQSy2I3q/ChBB4+L6VOj4/JSKiQCDgCRZsYSAiozg12f7j15jT55+4Hzy1JppLTUSnPaL3nc/v6yKiuuCdm8PhcDicpcEfk3eALbc1+VQAAAAASUVORK5CYII=\";\n    } else if (color.toLowerCase() == \"red\") {\n      iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAA0xJREFUaIHtlz1sEmEcxp9XhBQDhRA/MCSNTUy8tEsXXEsgcdABqoOTpA4ukKAOxsYuDkJ0rdHo1JQmbgYcXPxKnDTgUAdtmzSxIUCKRCweoQV693eAu2h7BQ5a08T3Nx33P557nvfr3hfgcDgcDofD4XA4/ytsL0SIyA7g+l5oabDKGJvbrXi4X3UiskOWP2/9/Hm0XijU+9XbzpGRETsReRhjV7Xqunug1drjAMZat8bkzc0LXzweoySKfVjVxhkOwxkKAcAwY2x1e11XDxDRdZKke8xgsNQymYpUqWyZjh8fqGUybD/MA0AlnVYuTwHoPQARzQKYLDx9imI8DkkULUCzhSxu91547YmuAijmM9PTKCWT+2xJH4c6PXCQzQMdAhx080CbAETkwQE3D7SZA1Sv3xI/fGiUkknjvzSkl10DMJPp/PqrV12JGKzWPTOkV7vtKlTP5zu+QBJFmAUBDr+/q+f14vD7lcsFrXrfW4lSIgFHIIChWKxfqXbcZIytaxX6DiCJIpYvXoTl7Nl+pXbgCASUHtBsfaCPAGZBwMbSkvq7kkr1KrVDS6GbL7yuAAarFUPRKGw+n3pv7dEjrD1+rEdG5diVK3CGw+pEraTTyExPo57Lda2hK8Dww4cwuVz4Fomok9cZCsEwOIjc/fv6zAeDcN2+jeL8PMrv3gEAnKEQTs/OYvnSJXS7Odw1gLy5WTALwgllaNh8Pljcbnw9d05toUoqhXouh+GZGRTn53W1nDMUQunFi7+Cr6RSGHn9Go6JCRTjcRwZHW0AMEJjF9oxwKGBgScnI5E7UrlsrOfzsHm9qKTTO0yW375tBvR6NcexFmZBgMFq1fzCl5JJ2LxegAiD4+NGAO+1zgEdAzDG7hKRfSgWU4+KjeaJy/Tnc8r4dU1NdWVe679/YnK5YHG7lQn8HkCgnUZXJzIiGkPzQJHIPXiAYjyu1oaiUTgCAQCYAKC5VmshV6uXa9nstZVg0KCMd7Mg4Mzz56rx3db+niGiSSKi6uIifZ+bo1o2Sy0me9CyS6K4svXrl/wjkaD1N2+aSrJcbjXY/kBEHrlWe9kolRakjY1nrV1rr1p2IrohieKnrWr1IxHdbZ25ORwOh8P5P/gNqhx/6rsujjgAAAAASUVORK5CYII=\";\n    } else if (color.toLowerCase() == \"yellow\") {\n      iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAAyhJREFUaIHtlz1MU1EYht/vYhWNaZtghAGNmICJVmFwMCFRHEwEE8VJnMRBnRQdygAODrroYCILuBgWYdPEyGRixBQcHCD+DKhAWiM41HgJlJ/bnteht/Wntz+3BUPCeabe+528fb/vnHvOdwCNRqPRaDQajUazUZHVECHpB9CxGloOTItIf7bgplLVSfpBNQ7rxw4sflspVS8D3yE/ySYRuegUdj0DdrWPAWiwXzUgsXgq8eKgB5ZZglNnpK4TRl0QAGpEZPrfuKsZINkBxm9DNm1HbHIe1nwc5VXlXJiUtTAPAIiGAAQBYA+A4hMg+QhAu/p0H5zqAyxzO5CskFQ0rpJb9xSUQMo8x6+BkYE1tuQOI9+AP82rdWYeyJPAejcP5EiAZBPWuXkg1zeQWA4yOmypyIDnP/pxTfYEyra0YOZZYSoe7yrZcdL25Qzn3IUYC+fVl7gJ8QYgu9qAAsa7RarPpX6OOcVLbiVUZBBG9XkY9T2lSuXihoj8dAqUnAAsE2q4aU0OM6luS85sluoDJSQg3gA49z79zGioWKkMrTQVjXmbNXcJeHww6h9AqlrSrzhxF2riniuZFEbNZUhdZ/pDZTQEjl8r6NtL4SoB43A/ZNtuqLcXAMuE+AKQ2k6Ixw9+6HZnfu8VyP7bUFMPgdkhAHbneeQpEq+Po9DmMPtJnFj6Lr5A+lGqWiAVjVCjreDsEBgNQU32QY1fTVZy225XCUhtEIwMgh+6k5WPhqBGzwACGMl1D/E3WPbwjC40RY5zoLxX9nV1iWV6EAtDKpvB6EjG9DJVvcqTgNM6djLvDQAeH/h1MCOmIoOQymYYJGTnCQ+AV073gLwJiMgtkn6jvuf3VXFpZgXA5r8G2utXDtxxfztyOKRk667kjpbc1V4BaM0lUdB/kmxA8kLxhB9vQk32pWNGfU9qqzsLwHGvdiQxf46x8CU1crostd7FG4Bx9GXaeLa9v2hItpOkMt8x8aWXXAjTpr0ILT9X5j7TMpUKD1DNPLellGkXbG0g2cT40nMuR8cYjz22u9Zitfwkr3PFfMv4whuSt+w7t0aj0Wg0G4NfTixkfFxyXPEAAAAASUVORK5CYII=\"\n    } else if (color.toLowerCase() == \"purple\") {\n      iconUrl = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF62lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0wM1QxMTo0MDozNy0wNTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDMtMDNUMTE6NTM6MjUtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDMtMDNUMTE6NTM6MjUtMDU6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YTlhYTYxZGYtY2VhNC0wYzQyLThhZTAtZjY1ZTdhNWIwMjBhIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MTI4NmYzZGUtZDdjNS1kZTRmLTg5NGYtMWYzODk2YmM5ZjFkIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YTdkNDRmN2EtMjJlYy1hODQ0LTlmOWItMTA3YjFhNWY2OTcyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphN2Q0NGY3YS0yMmVjLWE4NDQtOWY5Yi0xMDdiMWE1ZjY5NzIiIHN0RXZ0OndoZW49IjIwMTgtMDMtMDNUMTE6NDA6MzctMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmE5YWE2MWRmLWNlYTQtMGM0Mi04YWUwLWY2NWU3YTViMDIwYSIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0wM1QxMTo1MzoyNS0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6RQ2cXAAACS0lEQVRo3u2YvUoDQRDH8wh5BN9AH8DC2kYrWwXt1V7RWhu7lIKKWCkqNoKooKBEJSDED0wRjSSScGLiJWZzd+v+z9uwhHxe9uCEGRhCNnez85udnZ1NhHMe+c8aIQACIAACIAACIAACIAACIADtAL2IeD4qdCkgnVTm0Q8A5x2bp8sFZhaS35+6lf/JujYAL9pjSoT2ahWb7Qzf8o3Ba+2aiGU8Bj7QN4AYn7UtpwRrxddKCREq51nl465YC8J56PHMgwQY6QsAywgriIgabXzPxr94qAGk85eLqaZLHGqAds6HHqCT86EG8F5o63yoAeyqc/R2/sm6KXNhXYGO0ZcAxqMZGMDp/LN/ANB3miC+mnatXyyk+PH0g3Z9PTEkQDQQAJwJxpPJA5a5nluJbgHUXNWtqYN8PX20AxxO3GvL81a2lD5IDwDSRclJLlsLv47HV9K8WqzVbaGa7Y4mggPABKX3H7cy4DdsYDiQ3Mr27ry3+fGuTBnXfuan3mv1BSBa5BwmaSxnaoTajXdSgCPHG8cRIDkvziHZSvtZgeVa2WayPL7s51seWBCkQ7elEc+22mPyYJTPCDnzfSMTn2tqvpu5arVZGfUrWL1Ge0rlcZ1H/e/7Sim+DwkddyOtpBUUK+PJuHdadqXMtGLGs2mpdwtUo2aOa7sTi/EpWEfrkNzMuhvOk6lIjwIHWcl6EXvBQRDq1c3hXwhYi3e03IlH0OhVDJYQG31bVgg/4rUHcwLkhpWtK+y7ZpH3BUB/bBEAARAAARDAf9BfRb64KYflRLAAAAAASUVORK5CYII=\"\n    }\n\n    return iconUrl;\n  }\n\n  locatepushpin(obj) {\n    const truckId = obj.truckId;\n\n    // Loop through all the pins in the data layer and find the pushpin for the location. \n    let searchPin;\n    for (let i = 0; i < this.dataLayer.getLength(); i++) {\n      searchPin = this.dataLayer.get(i);\n      if (searchPin.metadata.truckId.toLowerCase() !== truckId.toLowerCase()) {\n        searchPin = null;\n      } else {\n        break;\n      }\n    }\n\n    // If a pin is found with a matching ID, then center the map on it and show it's infobox.\n    if (searchPin) {\n      // Offset the centering to account for the infobox.\n      this.map.setView({ center: searchPin.getLocation(), zoom: 17 });\n      // this.displayInfoBox(searchPin, obj);\n    }\n  }\n\n  createRotatedImagePushpin(location, url, rotationAngle, callback) {\n    var img = new Image();\n    img.onload = function () {\n      var c = document.createElement('canvas');\n\n      var rotationAngleRads = rotationAngle * Math.PI / 180;\n      c.width = 50;\n      c.height = 50;\n      // Calculate rotated image size.\n      // c.width = Math.abs(Math.ceil(img.width * Math.cos(rotationAngleRads) + img.height * Math.sin(rotationAngleRads)));\n      // c.height = Math.abs(Math.ceil(img.width * Math.sin(rotationAngleRads) + img.height * Math.cos(rotationAngleRads)));\n\n      var context = c.getContext('2d');\n\n      // Move to the center of the canvas.\n      context.translate(c.width / 2, c.height / 2);\n\n      // Rotate the canvas to the specified angle in degrees.\n      context.rotate(rotationAngleRads);\n\n      // Draw the image, since the context is rotated, the image will be rotated also.\n      context.drawImage(img, -img.width / 2, -img.height / 2);\n      // anchor: new Microsoft.Maps.Point(24, 6)\n      if (!isNaN(rotationAngleRads) && rotationAngleRads > 0) {\n        location.setOptions({ icon: c.toDataURL(), anchor: new Microsoft.Maps.Point(c.width / 2, c.height / 2) });\n      }\n\n      // return c;\n    };\n\n    // Allow cross domain image editting.\n    img.crossOrigin = 'anonymous';\n    img.src = url;\n  }\n\n  getThresholdValue() {\n\n    this.mapService.getRules(this.techType)\n      .subscribe(\n        (data) => {\n          var obj = JSON.parse((this.stringifyBodyJson(data)).data);\n          if (obj != null) {\n            var idleTime = obj.filter(element => {\n              if (element.fieldName === 'Cumulative idle time for RED' && element.dispatchType === this.techType) {\n                return element.value;\n              }\n            });\n\n            if (idleTime != undefined && idleTime.length > 0) {\n              this.thresholdValue = idleTime[0].value;\n            }\n          }\n        },\n        (err) => {\n          console.log(err);\n        }\n      );\n  }\n\n  stringifyBodyJson(data) {\n    return JSON.parse(data['_body']);\n  }\n\n  UTCToTimeZone(recordDatetime) {\n    var recordTime;\n    var recorddTime = momenttimezone.utc(recordDatetime);\n    // var recorddTime = momenttimezone.tz(recordDatetime, \"America/Chicago\");\n\n    if (this.loggedInUserTimeZone == 'CST') {\n      recordTime = recorddTime.tz('America/Chicago').format('MM-DD-YYYY HH:mm:ss')\n    } else if (this.loggedInUserTimeZone == 'EST') {\n      recordTime = recorddTime.tz('America/New_York').format('MM-DD-YYYY HH:mm:ss')\n    } else if (this.loggedInUserTimeZone == 'PST') {\n      recordTime = recorddTime.tz('America/Los_Angeles').format('MM-DD-YYYY HH:mm:ss')\n    } else if (this.loggedInUserTimeZone == 'Alaska') {\n      recordTime = recorddTime.tz('US/Alaska').format('MM-DD-YYYY HH:mm:ss')\n    }\n\n    return recordTime;\n  }\n\n  addTicketData(map, dirManager){\n    var that = this;\n    this.UpdateTicketJSONDataList();\n    var initIndex: number =1;\n    this.ticketData.forEach(data => {\n      var ticketImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAtCAYAAADcMyneAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANOSURBVFiFzZlPSBRRGMB/39tMCCN3Ny3ILlGC/TlYUOCfTYIwISjwVnTpVHTJg1EgCdVFq1sRHSLonIe6WFGkq7sVFEhhmuWtP4TMiiiFujOvQ6M76qw67rjj7zbvffN9Px6zO+99I6wA3UChMU6tCLVaqBSLXQhbgCI7ZALNbxGGNPRpiEeL6JVOJr3WEi/BozEqLYsLCI1Ascdao0CHMrkbTtLnq2Cqjr3a5BZQ71EqW9VOTJqjCfqXDl0EvYf1qQg3gCZgnS9yGdJauB01uCr9THkWNOooE5MnGvb7LDbf4L2e5uTmN/xwn3aTq2YPIZ6j2baqchm+A/XRHj7Pn1ggOFJDuRK6ga35MHPwywwRK+3im3NwjuBINRuV4h1QkVe1DENSyMHIS8ZmBpRzVikeEpwcQLme5L5zYHYFjVoagcd5V3LBEk6UxHkKtqA+QEFqA4PAjkDNbAS+hUNUSBdpBWBs4DRrRA5Aw04jzSmwn0GB88EqLUSEcwBi/618CVrIjZDJTiXi0/t1FbAU9UqgKmiRbFhQrYDdQYtkRahQQFnQHotQpsjsgtccApsUeN+G55G/CvgZtMUi/FQCv4K2WIQfyoKBoC2yITCogBdBi2RF81zsTaoBFATtM48pM0RUlSQYZw2uosCz0i4mFIAS2oMWcqEd7O1WOE4cSAaq40TTE+khAc4zidAMmEE5OTDRXJq5mBWMxklqzc1gnDIItEUTvHVcZ9ANFI5OkFz1bkIWBD6EU1Q5WyFzjp3SyWQBHIOFJ/w8MJQOcXx+n8a99VFHGSbd5OkgpWFYW8RKEgv3BcrthmgX3wtCHELoXH09XplTVLvJwVLtN1BGLZcFWoH1PotNidAajtMmoLMFLauBacTYDrSgOUvufUILoSOU5kpxkuGlgj21gEdqKFdwxm4Be+3hDKDpMBWPSuN8Xe5NngSdpGLs05puILxE6KgIhyNxPq2kjuuPZDnYBa8vI/TaSuUgB0GAyB/uAEPZ5jUMR4q4l0uNnATlA9PW/3e4e3JN00q+jcypkcvNMxg1vEA4Oiex5nWklyO55s5pBWfRNAFpx4iJcNGP1L4I2h9kHs4OCA8iPXz0I7c/KwhMm7QAY8C4qWj1K+8/dkjlffe0168AAAAASUVORK5CYII=\"\n      if(data.ticketSeverity === \"Unknown\" || data.ticketSeverity === \"Warning\" || data.ticketSeverity === \"Minor\")\n      {\n        ticketImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAzCAYAAADsBOpPAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPySURBVGiB7ZhPiBt1FMe/7yXT1d3FQhGKeKnoKtjsWmlvxRah9qLVS6dJZoOuBw+WQi/1tIcWvOiWslS9uAeJaya/bIMHKYqohxQUQYhaNpWyWFBWoi30oCh1N5Pf87DbkJ1MJpOdZBKwn1ve7/1+75Nh5vePsA1M09xhGMZBAIcAPA3gCQC7AYxvpvxNRH+IyAqAH5j5yujo6DcLCwu17dRrhrpJTqfTe4noFIATAHZ1Wes2gEtE9J5t2z912bdBIOFkMvl4LBabA/Bi0D4+CIBPmPmNXC73c7edfYubphmLx+OzRDQLYMd2DduwJiJvOo7zVrFYrAft1FY4nU4/SEQfY+M97RsiUjIM4/ji4uLtIPmewqlUag8zfwFgoqd27VkBcDSfz//aKbFFOJ1O7yaiK9j48qPkBjM/k8vlfvdL4uYfMzMz9xHRp4heFgAe1Vp/Zprm/X5JW4TX19fnAezvq5Y/+wzDmPNLaLwSlmUdAlBC+GkrLFpEDiulvvZqvPuECcBFDF4WAJiI5tHGhQEgk8kcA7AvSqsOHJienn7eq4EBQGt9MlqfzojI615xymQyD2mtVwHEInbqRF1EHlZK3WwOsogcxfDJAhtOz7mDrLXu69IbBiI67I4xM+8dhEwQiOhJd4xFZM8AXAIhIo+4Ywxg5wBcgtLixl5ZQ0SLHwO46ZE4LFTdAfYKDhGewh03zQOkxY03N+tDiYiU3DGu1+ufD8AlECLylTvGhULhFwDXo9fpyLVNty0wAIjIu5HrdOYdryADwMjIyAcYruntVq1W+8irgQEgm83+C2A+UiV/zheLxTteDY2VpFqtXgDwXWRK7fl+fHz8YrvGhnCpVHJE5BUAnv8sItZE5GW/W84ta7VS6jqA1wDofpt5oEXkVaXUNb+klpPG8vLyciKRWCWiXtxUBkVE5KRSKtsp0fNoVKlUfpycnLwFIIrj07qInFJKvR8k2fcJplKpA8x8CUDLRrpH/CYiJ5RS3wbt4Pv0KpVKNZFI2ET0AICnOuV3QQ3AQjweT9q2vdJNx8DvaCaTeUxrfQ7AcQAj3fk1WCOiouM455aWlm5sZ4CuPyrTNHcahvECgCSAYwG7XQawRESXbdv+q9uazYSaBSzL+hLAEb8cESkppZ4NU6eZUGc6Zj4D/zlbE9GZMDVaaobpnMvlrgJY9En5MJ/Pl8PUcBP61Ky1ngXwj0fTHa312bDjuwktXCgUqkR0waNprlAorIYd301P7iXGxsbeBtAsV43FYud7MbabniwE5XK5NjU19SeAlwBARE7btt2XrWrPbn4mJiayAMoictVxHL8PcXiwLOuIZVm+8/I97vF/5z/d0joEPzhZGgAAAABJRU5ErkJggg==\"\n      }else if(data.ticketSeverity === \"Major\"){\n        ticketImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAzCAYAAADsBOpPAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOySURBVGiB7ZhNaBxlGICfd2ZNalsoiFBUhLbZTfpzMNLgQTFFqL1oPZV4UZvdpJTWHuspggEvmlJCVdCg5sciYsSD9CLqIYGKILbaQ2q73a2GltgKBRVNmuzOvB4S083szOzMzu7sgn1u837v930PH7vfzytUw+RMCwutT2BrN/Ao0AFsBjauZPyNcgMhC/wITLP057cc7ipUNV8JEip7/MouVI6B9gD3hZzrFsIkNu+QSV0M2XeVYMIT+XZsewh4LnAfbxT4AkteoT+ZC9vZf/JJNZnPDaAMAC1VCnqxiMjrrG97gx6xgnbyFh65fD8txudAdy3sfJjCKB7g4I5bQZLdhcd+3gKJr4BUDcX8yGKZ++jfNlspsVz4/aubSdjToB11UfMmT6LwJC/u/M0vaa3w2C/roHgW2F1PMx9+YsO6x+l5eMErwVj7aQ3TOFmATuZvD/kl3Fnh8Ww3KlNE37aiYmMbe+hrO+vWuLzCqoLKKRovC2Bg2sOourosC0/k9gOdcVr5onQxduUZt6aVFeZorEJBEI64h09ffIDiPdcAM2alSlgUzYc4tO1madCg0LKP5pMFMDGtp51BA9F6H73VY7CnPAS7GqASDGWnM2QAW+I3CYpsdUYMYFMDTAKiZW6GW1oTUeZnADddEpuFOWfAQMuDTYOoi7BoxUtzw1ApczOA6QaoBEOZcoYMsL5sgEowpPiNM2SQ3vErcCl+m4rMrLit4b9t4+14XQIg8pZbeEU4MUpzbW+/s771tFvDsnB6621gOE4jX1ROeD1E75wks9dPAt/H5eTDeQp/nPJqdDzzL28H4zxwb72tPFhE2E1vasYrYe1Zne64hHAIsOtt5oKNatpPFtwuP72pj1HtZ7nKGBeK6lEy7Z9USnS/rWXax1BeBiIXoAOwhOoRMu0jQZL96xAf5rsw7Emg7CJdE4TrCD0cTH0XtIv/fbiv7QeW7MdA3qO2q11AeBcpdoaRhTCVng9ySUwdBA4AreH8VllE+AwYpDeVr2aA8KWpkfwmWu1nUZ4H9gfsdQbhUxKc4YXUX6HnLCFaLW089zWqeytkTZFOPRVpnhKiveks6zj+e7aNyPFIcziIJtzXcQHkI892YYLe5LlIcziI/mq2iwPAPy4tC9jyWuTxHUQX7ts+h3LSpWWITPJa5PEd1KYuUdjwJlAqN4c5f6ImYzuojfDhB+eBwdVv1Vd56RG3n0lkalf5mU2OA+eAC2xMef8Rm4rR7F5Gs5X25bvc5X/Nv1oY9qdbFkl0AAAAAElFTkSuQmCC\"\n      }\n\n      var pushpin = new Microsoft.Maps.Pushpin(new Microsoft.Maps.Location(data.latitude, data.longitude), { icon: ticketImage, text: initIndex.toString() });\n      pushpin.metadata = data;\n      map.entities.push(pushpin);\n      this.dataLayer.push(pushpin);\n      Microsoft.Maps.Events.addHandler(pushpin, 'click', pushpinClicked);\n      map.setView({ mapTypeId: Microsoft.Maps.MapTypeId.road, center: new Microsoft.Maps.Location(data.latitude, data.longitude)});\n      initIndex = initIndex + 1;\n    });\n    $('.NavBar_Container.Light').attr('style','top:580px');\n    const infobox = new Microsoft.Maps.Infobox(map.getCenter(), {\n      visible: false  \n    });    \n    function pushpinClicked(e) {\n      if (e.target.metadata) {\n        infobox.setMap(map);  \n        infobox.setOptions({\n          location: e.target.getLocation(),\n          visible: true,\n          offset: new Microsoft.Maps.Point(0, 20),\n          htmlContent:'<div class = \"infy\" style= \"background-color: white;border: 1px solid lightgray; width:360px;\">'\n          + getTicketInfoBoxHTML(e.target.metadata) + '</div>'\n        });\n      }\n      $('.NavBar_Container.Light').attr('style','top:580px');\n      pinClicked(e.target.metadata)\n      Microsoft.Maps.Events.addHandler(infobox, 'click', close);\n  }\n  function pinClicked(parms){\n    console.log('emit',that);\n    that.ticketClick.emit(parms);\n  }\n  function close(e) {\n    if (e.originalEvent.target.className === 'fa fa-times') {\n      $('.NavBar_Container.Light').attr('style','top:0px');\n      infobox.setOptions({\n        visible: false\n      });\n    }\n  }\n  \n        function getTicketInfoBoxHTML(data: any):String{\n         console.log(data);\n        var infoboxData = \"<div class='row' style='padding-top:10px;padding-bottom:10px;margin: 0px;'>\"\n        + \"</div>\"\n        return infoboxData;\n        }\n\n\n}\n\n  UpdateTicketJSONDataList()\n  {\n    if(this.ticketList.length !=0)\n    {\n    this.ticketList.TicketInfoList.TicketInfo.forEach(ticketInfo => {\n      var ticket: Ticket = new Ticket();;\n      ticketInfo.FieldTupleList.FieldTuple.forEach(element => {\n        if(element.Name === \"TicketNumber\"){\n            ticket.ticketNumber = element.Value;\n        }\n        else if(element.Name === \"EntryType\"){\n          ticket.entryType = element.Value === null ? '' :  element.Value;\n        }\n        else if(element.Name === \"CreateDate\"){\n          ticket.createDate = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"EquipmentID\"){\n          ticket.equipmentID = element.Value === null ? '' :  element.Value;\n        }\n        else if(element.Name === \"CommonID\"){\n          ticket.commonID = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ParentID\"){\n          ticket.parentID = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"CustAffecting\"){\n          ticket.custAffecting = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"TicketSeverity\"){\n          ticket.ticketSeverity = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"AssignedTo\"){\n          ticket.assignedTo = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"SubmittedBy\"){\n          ticket.submittedBy = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ProblemSubcategory\"){\n          ticket.problemSubcategory = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ProblemDetail\"){\n          ticket.problemDetail = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ProblemCategory\"){\n          ticket.problemCategory = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"Latitude\"){\n          ticket.latitude = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"Longitude\"){\n          ticket.longitude = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"PlannedRestoralTime\"){\n          ticket.plannedRestoralTime = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"AlternateSiteID\"){\n          ticket.alternateSiteID = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"LocationRanking\"){\n          ticket.locationRanking = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"AssignedDepartment\"){\n          ticket.assignedDepartment = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"Region\"){\n          ticket.region = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"Market\"){\n          ticket.market = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"WorkRequestId\"){\n          ticket.workRequestId = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ShiftLog\"){\n          ticket.shiftLog = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"Action\"){\n          ticket.action = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"EquipmentName\"){\n          ticket.equipmentName = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ShortDescription\"){\n          ticket.shortDescription = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"ParentName\"){\n          ticket.parentName = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"TicketStatus\"){\n          ticket.ticketStatus = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"LocationID\"){\n          ticket.locationID = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"OpsDistrict\"){\n          ticket.opsDistrict = element.Value === null ? '' :  element.Value;\n        }else if(element.Name === \"OpsZone\"){\n          ticket.opsZone = element.Value === null ? '' :  element.Value;\n        }\n      });\n      this.ticketData.push(ticket);\n    });\n  }\n  }\n\n  ngOnDestroy() {\n    if (this.connection !== undefined) {\n      this.connection.unsubscribe();\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RttamaplibComponent } from './rttamaplib.component';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [RttamaplibComponent],\n  exports: [RttamaplibComponent]\n})\nexport class RttamaplibModule { }\n"]}